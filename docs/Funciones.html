<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
<head>
<!-- 2020-02-17 lun 23:25 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Funciones</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="[[https://oscarperpinan.github.io][Oscar Perpiñán Lamigueiro]]Oscar Perpiñán Lamigueiro" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Funciones</h1>


<div id="outline-container-org733c965" class="outline-2">
<h2 id="org733c965"><span class="section-number-2">1</span> Conceptos Básicos</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgba2eef0" class="outline-3">
<h3 id="orgba2eef0"><span class="section-number-3">1.1</span> Fuentes de información</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li><a href="http://cran.r-project.org/doc/manuals/R-intro.html">R introduction</a></li>
<li><a href="http://cran.r-project.org/doc/manuals/R-lang.html">R Language Definition</a></li>
<li><a href="http://www.springer.com/gb/book/9780387759357">Software for Data Analysis</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgba74405" class="outline-3">
<h3 id="orgba74405"><span class="section-number-3">1.2</span> Componentes de una función</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>Una función se define con <code>function</code></li>
</ul>
<div class="org-center">
<p>
<code>name &lt;- function(arg_1, arg_2, ...) expression</code>
</p>
</div>
<ul class="org-ul">
<li>Está compuesta por:
<ul class="org-ul">
<li>Nombre de la función (<code>name</code>)</li>
<li>Argumentos (<code>arg_1</code>, <code>arg_2</code>, <code>...</code>)</li>
<li>Cuerpo (<code>expression</code>): emplea los argumentos para generar un resultado</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org8a4878c" class="outline-3">
<h3 id="org8a4878c"><span class="section-number-3">1.3</span> Mi primera función</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>Definición</li>
</ul>
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">myFun</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, y)
{
    x + y
}
</pre>
</div>

<ul class="org-ul">
<li>Argumentos</li>
</ul>
<div class="org-src-container">
<pre class="src src-R">formals(myFun)
</pre>
</div>

<pre class="example">
$x


$y
</pre>


<ul class="org-ul">
<li>Cuerpo</li>
</ul>
<div class="org-src-container">
<pre class="src src-R">body(myFun)
</pre>
</div>

<pre class="example">
{
    x
y
}
</pre>
</div>
</div>

<div id="outline-container-orged40e5c" class="outline-3">
<h3 id="orged40e5c"><span class="section-number-3">1.4</span> Mi primera función</h3>
<div class="outline-text-3" id="text-1-4">
<div class="org-src-container">
<pre class="src src-R">myFun(1, 2)
</pre>
</div>

<pre class="example">
[1] 3
</pre>


<div class="org-src-container">
<pre class="src src-R">myFun(1:10, 21:30)
</pre>
</div>

<pre class="example">
[1] 22 24 26 28 30 32 34 36 38 40
</pre>


<div class="org-src-container">
<pre class="src src-R">myFun(1:10, 3)
</pre>
</div>

<pre class="example">
[1]  4  5  6  7  8  9 10 11 12 13
</pre>
</div>
</div>

<div id="outline-container-org8faec9a" class="outline-3">
<h3 id="org8faec9a"><span class="section-number-3">1.5</span> Argumentos: nombre y orden</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Una función identifica sus argumentos por su nombre y por su orden (sin nombre)
</p>

<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">power</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, exp)
{
    x^exp
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">power(x=1:10, exp=2)
</pre>
</div>

<pre class="example">
[1]   1   4   9  16  25  36  49  64  81 100
</pre>


<div class="org-src-container">
<pre class="src src-R">power(1:10, exp=2)
</pre>
</div>

<pre class="example">
[1]   1   4   9  16  25  36  49  64  81 100
</pre>


<div class="org-src-container">
<pre class="src src-R">power(exp=2, x=1:10)
</pre>
</div>

<pre class="example">
[1]   1   4   9  16  25  36  49  64  81 100
</pre>
</div>
</div>

<div id="outline-container-org219130b" class="outline-3">
<h3 id="org219130b"><span class="section-number-3">1.6</span> Argumentos: valores por defecto</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li>Se puede asignar un valor por defecto a los argumentos</li>
</ul>
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">power</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, exp = 2)
{
    x ^ exp
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">power(1:10)
</pre>
</div>

<pre class="example">
[1]   1   4   9  16  25  36  49  64  81 100
</pre>


<div class="org-src-container">
<pre class="src src-R">power(1:10, 2)
</pre>
</div>

<pre class="example">
[1]   1   4   9  16  25  36  49  64  81 100
</pre>
</div>
</div>

<div id="outline-container-orgf3cdd8c" class="outline-3">
<h3 id="orgf3cdd8c"><span class="section-number-3">1.7</span> Funciones sin argumentos</h3>
<div class="outline-text-3" id="text-1-7">
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">hello</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>()
{
    print(<span class="org-string">'Hello world!'</span>)
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">hello()
</pre>
</div>

<pre class="example">
[1] "Hello world!"
</pre>
</div>
</div>

<div id="outline-container-org1b7153a" class="outline-3">
<h3 id="org1b7153a"><span class="section-number-3">1.8</span> Argumentos sin nombre: <code>...</code></h3>
<div class="outline-text-3" id="text-1-8">
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">pwrSum</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, power, ...)
{
    sum(x ^ power, ...)
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">x <span class="org-ess-assignment">&lt;-</span> 1:10
pwrSum(x, 2)
</pre>
</div>

<pre class="example">

[1] 385
</pre>


<div class="org-src-container">
<pre class="src src-R">x <span class="org-ess-assignment">&lt;-</span> c(1:5, <span class="org-ess-constant">NA</span>, 6:9, <span class="org-ess-constant">NA</span>, 10)
pwrSum(x, 2)
</pre>
</div>

<pre class="example">

[1] NA
</pre>


<div class="org-src-container">
<pre class="src src-R">pwrSum(x, 2, na.rm=<span class="org-ess-constant">TRUE</span>)
</pre>
</div>

<pre class="example">
[1] 385
</pre>
</div>
</div>

<div id="outline-container-org99ae0b6" class="outline-3">
<h3 id="org99ae0b6"><span class="section-number-3">1.9</span> Argumentos ausentes: <code>missing</code></h3>
<div class="outline-text-3" id="text-1-9">
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">suma10</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, y)
{
    <span class="org-ess-keyword">if</span> (missing(y)) y <span class="org-ess-assignment">&lt;-</span> 10
    x + y
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">suma10(1:10)
</pre>
</div>

<pre class="example">
[1] 11 12 13 14 15 16 17 18 19 20
</pre>
</div>
</div>

<div id="outline-container-org7bc13ea" class="outline-3">
<h3 id="org7bc13ea"><span class="section-number-3">1.10</span> Control de errores: <code>stopifnot</code></h3>
<div class="outline-text-3" id="text-1-10">
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">foo</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, y)
{
    stopifnot(is.numeric(x) &amp; is.numeric(y))
    x + y
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">foo(1:10, 21:30)
</pre>
</div>

<pre class="example">
[1] 22 24 26 28 30 32 34 36 38 40
</pre>


<div class="org-src-container">
<pre class="src src-R">foo(1:10, <span class="org-string">'a'</span>)
</pre>
</div>

<pre class="example">
Error in foo(1:10, "a") : is.numeric(x) &amp; is.numeric(y) is not TRUE
</pre>
</div>
</div>

<div id="outline-container-orgc2f531a" class="outline-3">
<h3 id="orgc2f531a"><span class="section-number-3">1.11</span> Control de errores: <code>stop</code></h3>
<div class="outline-text-3" id="text-1-11">
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">foo</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, y){
    <span class="org-ess-keyword">if</span> (!(is.numeric(x) &amp; is.numeric(y))){
        <span class="org-ess-keyword">stop</span>(<span class="org-string">'arguments must be numeric.'</span>)
    } <span class="org-ess-keyword">else</span> { x + y }
} 
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">foo(2, 3)
</pre>
</div>

<pre class="example">
[1] 5
</pre>


<div class="org-src-container">
<pre class="src src-R">foo(2, <span class="org-string">'a'</span>)
</pre>
</div>

<pre class="example">
Error in foo(2, "a") : arguments must be numeric.
</pre>
</div>
</div>

<div id="outline-container-org960999d" class="outline-3">
<h3 id="org960999d"><span class="section-number-3">1.12</span> Mensajes para el usuario</h3>
<div class="outline-text-3" id="text-1-12">
<p>
<code>stop</code> para la ejecución y emite un mensaje de error
</p>
<div class="org-src-container">
<pre class="src src-R"><span class="org-ess-keyword">stop</span>(<span class="org-string">'Algo no ha ido bien.'</span>)
</pre>
</div>

<pre class="example">
Error: Algo no ha ido bien.
</pre>


<p>
<code>warning</code> no interfiere en la ejecución pero añade un mensaje a la cola de advertencias
</p>
<div class="org-src-container">
<pre class="src src-R"><span class="org-ess-modifiers">warning</span>(<span class="org-string">'Quiz&#225;s algo no es como debiera...'</span>)
</pre>
</div>

<pre class="example">
Warning message:
Quizás algo no es como debiera...
</pre>


<p>
<code>message</code> emite un mensaje (<b>no usar <code>cat</code> o <code>print</code></b>)
</p>
<div class="org-src-container">
<pre class="src src-R"><span class="org-ess-modifiers">message</span>(<span class="org-string">'Todo en orden por estos lares.'</span>)
</pre>
</div>

<pre class="example">
Todo en orden por estos lares.
</pre>
</div>
</div>
</div>


<div id="outline-container-orgaf7579c" class="outline-2">
<h2 id="orgaf7579c"><span class="section-number-2">2</span> Lexical scope</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgb8ecb94" class="outline-3">
<h3 id="orgb8ecb94"><span class="section-number-3">2.1</span> Clases de variables</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Las variables que se emplean en el cuerpo de una función pueden
dividirse en:
</p>
<ul class="org-ul">
<li>Parámetros formales (argumentos): <code>x</code>, <code>y</code></li>
<li>Variables locales (definiciones internas): <code>z</code>, <code>w</code>, <code>m</code></li>
<li>Variables libres: <code>a</code>, <code>b</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">myFun</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, y){
    z <span class="org-ess-assignment">&lt;-</span> x^2
    w <span class="org-ess-assignment">&lt;-</span> y^3
    m <span class="org-ess-assignment">&lt;-</span> a*z + b*w
    m
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">a <span class="org-ess-assignment">&lt;-</span> 10
b <span class="org-ess-assignment">&lt;-</span> 20
myFun(2, 3)
</pre>
</div>

<pre class="example">

[1] 580
</pre>
</div>
</div>

<div id="outline-container-orga92cd2c" class="outline-3">
<h3 id="orga92cd2c"><span class="section-number-3">2.2</span> Lexical scope</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li>Las variables libres deben estar disponibles en el entorno
(<code>environment</code>) en el que la función ha sido creada.</li>
</ul>
<div class="org-src-container">
<pre class="src src-R">environment(myFun) 
</pre>
</div>

<pre class="example">
&lt;environment: R_GlobalEnv&gt;
</pre>


<div class="org-src-container">
<pre class="src src-R">ls()
</pre>
</div>

<pre class="example">
 [1] "a"           "anidada"     "b"           "constructor" "fib"        
 [6] "foo"         "hello"       "i"           "lista"       "ll"         
[11] "M"           "makeNoise"   "myFoo"       "myFun"       "power"      
[16] "pwrSum"      "suma1"       "suma10"      "suma2"       "suma3"      
[21] "sumProd"     "sumSq"       "tmp"         "x"
</pre>
</div>
</div>

<div id="outline-container-orge7d8f7d" class="outline-3">
<h3 id="orge7d8f7d"><span class="section-number-3">2.3</span> Lexical scope: funciones anidadas</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">anidada</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, y){
    xn <span class="org-ess-assignment">&lt;-</span> 2
    yn <span class="org-ess-assignment">&lt;-</span> 3
    <span class="org-function-name">interna</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, y)
    {
        sum(x^xn, y^yn)
    }
    print(environment(interna))
    interna(x, y)
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">anidada(1:3, 2:4)
</pre>
</div>

<pre class="example">
&lt;environment: 0x561467f15098&gt;
[1] 113
</pre>


<div class="org-src-container">
<pre class="src src-R">sum((1:3)^2, (2:4)^3)
</pre>
</div>

<pre class="example">
[1] 113
</pre>
</div>
</div>

<div id="outline-container-org0066c6c" class="outline-3">
<h3 id="org0066c6c"><span class="section-number-3">2.4</span> Lexical scope: funciones anidadas</h3>
<div class="outline-text-3" id="text-2-4">
<div class="org-src-container">
<pre class="src src-R">xn
</pre>
</div>

<pre class="example">
Error: objeto 'xn' no encontrado
</pre>


<div class="org-src-container">
<pre class="src src-R">yn
</pre>
</div>

<pre class="example">
Error: objeto 'yn' no encontrado
</pre>


<div class="org-src-container">
<pre class="src src-R">interna
</pre>
</div>

<pre class="example">
Error: objeto 'interna' no encontrado
</pre>
</div>
</div>

<div id="outline-container-orgac8abae" class="outline-3">
<h3 id="orgac8abae"><span class="section-number-3">2.5</span> Funciones que devuelven funciones</h3>
<div class="outline-text-3" id="text-2-5">
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">constructor</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(m, n){
    <span class="org-ess-keyword">function</span>(x)
    {
        m*x + n
    }
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">myFoo <span class="org-ess-assignment">&lt;-</span> constructor(10, 3)
myFoo
</pre>
</div>

<pre class="example">

function(x)
    {
        m*x
n
    }
&lt;environment: 0x561465446120&gt;
</pre>


<div class="org-src-container">
<pre class="src src-R"><span class="org-comment-delimiter">## </span><span class="org-comment">10*5 + 3</span>
myFoo(5)
</pre>
</div>

<pre class="example">

[1] 53
</pre>
</div>
</div>

<div id="outline-container-org673f6f2" class="outline-3">
<h3 id="org673f6f2"><span class="section-number-3">2.6</span> Funciones que devuelven funciones</h3>
<div class="outline-text-3" id="text-2-6">
<div class="org-src-container">
<pre class="src src-R">class(myFoo)
</pre>
</div>

<pre class="example">
[1] "function"
</pre>


<div class="org-src-container">
<pre class="src src-R">environment(myFoo)
</pre>
</div>

<pre class="example">
&lt;environment: 0x561465446120&gt;
</pre>


<div class="org-src-container">
<pre class="src src-R">ls()
</pre>
</div>

<pre class="example">
 [1] "a"           "anidada"     "b"           "constructor" "fib"        
 [6] "foo"         "hello"       "i"           "lista"       "ll"         
[11] "M"           "makeNoise"   "myFoo"       "myFun"       "power"      
[16] "pwrSum"      "suma1"       "suma10"      "suma2"       "suma3"      
[21] "sumProd"     "sumSq"       "tmp"         "x"
</pre>


<div class="org-src-container">
<pre class="src src-R">ls(env = environment(myFoo))
</pre>
</div>

<pre class="example">
[1] "m" "n"
</pre>


<div class="org-src-container">
<pre class="src src-R">get(<span class="org-string">'m'</span>, env = environment(myFoo))
</pre>
</div>

<pre class="example">
[1] 10
</pre>


<div class="org-src-container">
<pre class="src src-R">get(<span class="org-string">'n'</span>, env = environment(myFoo))
</pre>
</div>

<pre class="example">
[1] 3
</pre>
</div>
</div>
</div>

<div id="outline-container-org3e490b3" class="outline-2">
<h2 id="org3e490b3"><span class="section-number-2">3</span> Funciones para ejecutar funciones</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org66c03bd" class="outline-3">
<h3 id="org66c03bd"><span class="section-number-3">3.1</span> <code>lapply</code></h3>
<div class="outline-text-3" id="text-3-1">
<p>
Supongamos que tenemos una lista de objetos, y queremos aplicar a cada elemento la misma función:
</p>
<div class="org-src-container">
<pre class="src src-R">lista <span class="org-ess-assignment">&lt;-</span> list(a = rnorm(100),
              b = runif(100),
              c = rexp(100))
</pre>
</div>

<p>
Podemos resolverlo de forma repetitiva&#x2026;
</p>
<div class="org-src-container">
<pre class="src src-R">sum(lista$a)

sum(lista$b)

sum(lista$c)
</pre>
</div>

<pre class="example">
[1] 8.551703

[1] 48.13393

[1] 91.70712
</pre>


<p>
O mejor con <code>lapply</code> (lista + función):
</p>
<div class="org-src-container">
<pre class="src src-R">lapply(lista, sum)
</pre>
</div>

<pre class="example">
$a
[1] 8.551703

$b
[1] 48.13393

$c
[1] 91.70712
</pre>
</div>
</div>

<div id="outline-container-orge5ba3b9" class="outline-3">
<h3 id="orge5ba3b9"><span class="section-number-3">3.2</span> <code>do.call</code></h3>
<div class="outline-text-3" id="text-3-2">
<p>
Supongamos que queremos usar los elementos de la lista como argumentos de una función.
</p>

<p>
Resolvemos de forma directa:
</p>
<div class="org-src-container">
<pre class="src src-R">sum(lista$a, lista$b, lista$c)
</pre>
</div>

<pre class="example">
[1] 148.3928
</pre>


<p>
Mejoramos <i>un poco</i> con <code>with</code>:
</p>
<div class="org-src-container">
<pre class="src src-R">with(lista, sum(a, b, c))
</pre>
</div>

<pre class="example">
[1] 148.3928
</pre>


<p>
La forma recomendable es mediante <code>do.call</code> (función + lista)
</p>
<div class="org-src-container">
<pre class="src src-R">do.call(sum, lista)
</pre>
</div>

<pre class="example">
[1] 148.3928
</pre>
</div>
</div>

<div id="outline-container-org3b45ce5" class="outline-3">
<h3 id="org3b45ce5"><span class="section-number-3">3.3</span> <code>do.call</code></h3>
<div class="outline-text-3" id="text-3-3">
<p>
Se emplea frecuentemente para adecuar el resultado de <code>lapply</code> (entrega una lista):
</p>
<div class="org-src-container">
<pre class="src src-R">  x <span class="org-ess-assignment">&lt;-</span> rnorm(5)
  ll <span class="org-ess-assignment">&lt;-</span> lapply(1:5, <span class="org-ess-keyword">function</span>(i)x^i)
  do.call(rbind, ll)
</pre>
</div>

<pre class="example">

              [,1]      [,2]     [,3]       [,4]     [,5]
[1,] -0.1741481604  1.836011 1.572541 0.38827268 1.408270
[2,]  0.0303275818  3.370936 2.472885 0.15075568 1.983224
[3,] -0.0052814926  6.189075 3.888713 0.05853431 2.792915
[4,]  0.0009197622 11.363209 6.115161 0.02272727 3.933179
[5,] -0.0001601749 20.862975 9.616340 0.00882438 5.538978
</pre>
</div>
</div>

<div id="outline-container-org35fd363" class="outline-3">
<h3 id="org35fd363"><span class="section-number-3">3.4</span> <code>Reduce</code></h3>
<div class="outline-text-3" id="text-3-4">
<p>
Combina sucesivamente los elementos de un objeto aplicando una función binaria
</p>
<div class="org-src-container">
<pre class="src src-R"><span class="org-comment-delimiter">## </span><span class="org-comment">(((1+2)+3)+4)+5</span>
Reduce(<span class="org-string">'+'</span>, 1:5)
</pre>
</div>

<pre class="example">

[1] 15
</pre>
</div>
</div>

<div id="outline-container-org5ce8da1" class="outline-3">
<h3 id="org5ce8da1"><span class="section-number-3">3.5</span> <code>Reduce</code></h3>
<div class="outline-text-3" id="text-3-5">
<div class="org-src-container">
<pre class="src src-R"><span class="org-comment-delimiter">## </span><span class="org-comment">(((1/2)/3)/4)/5</span>
Reduce(<span class="org-string">'/'</span>, 1:5)
</pre>
</div>

<pre class="example">

[1] 0.008333333
</pre>


<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">foo</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(u, v)u + 1 /v
Reduce(foo, c(3, 7, 15, 1, 292))
<span class="org-comment-delimiter">## </span><span class="org-comment">equivalente a</span>
<span class="org-comment-delimiter">## </span><span class="org-comment">foo(foo(foo(foo(3, 7), 15), 1), 292)</span>
</pre>
</div>

<pre class="example">

[1] 4.212948
</pre>


<div class="org-src-container">
<pre class="src src-R">Reduce(foo, c(3, 7, 15, 1, 292), right=<span class="org-ess-constant">TRUE</span>)
<span class="org-comment-delimiter">## </span><span class="org-comment">equivalente a</span>
<span class="org-comment-delimiter">## </span><span class="org-comment">foo(3, foo(7, foo(15, foo(1, 292))))</span>
</pre>
</div>

<pre class="example">
[1] 3.141593
</pre>
</div>
</div>

<div id="outline-container-org60b0e4f" class="outline-3">
<h3 id="org60b0e4f"><span class="section-number-3">3.6</span> Funciones recursivas</h3>
<div class="outline-text-3" id="text-3-6">
<p>
Ejemplo: <a href="http://en.wikibooks.org/wiki/R_Programming/Working_with_functions#Functions_as_Objects">Serie de Fibonnaci</a>
</p>
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">fib</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(n){
    <span class="org-ess-keyword">if</span> (n&gt;2) {
        c(fib(n-1),
          sum(tail(fib(n-1),2)))
    } <span class="org-ess-keyword">else</span> <span class="org-ess-keyword">if</span> (n&gt;=0) rep(1,n)
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">fib(10)
</pre>
</div>

<pre class="example">
[1]  1  1  2  3  5  8 13 21 34 55
</pre>
</div>
</div>
</div>

<div id="outline-container-org33603d8" class="outline-2">
<h2 id="org33603d8"><span class="section-number-2">4</span> Debug</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orge03bd6b" class="outline-3">
<h3 id="orge03bd6b"><span class="section-number-3">4.1</span> Post-mortem: <code>traceback</code></h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">sumSq</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, ...)
    sum(x ^ 2, ...)

<span class="org-function-name">sumProd</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, y, ...){
    xs <span class="org-ess-assignment">&lt;-</span> sumSq(x, ...)
    ys <span class="org-ess-assignment">&lt;-</span> sumSq(y, ...)
    xs * ys
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">sumProd(rnorm(10), runif(10))
</pre>
</div>

<pre class="example">
[1] 38.5012
</pre>


<div class="org-src-container">
<pre class="src src-R">sumProd(rnorm(10), letters[1:10])
</pre>
</div>

<pre class="example">
Error in x^2 : argumento no-numérico para operador binario
</pre>


<div class="org-src-container">
<pre class="src src-R">traceback()
</pre>
</div>

<pre class="example">
2: sumSq(y, ...) at #3
1: sumProd(rnorm(10), letters[1:10])
</pre>
</div>
</div>

<div id="outline-container-org2f1ceac" class="outline-3">
<h3 id="org2f1ceac"><span class="section-number-3">4.2</span> Analizar antes de que ocurra: <code>debug</code></h3>
<div class="outline-text-3" id="text-4-2">
<p>
<code>debug</code> activa la ejecución paso a paso de una función:
</p>
<div class="org-src-container">
<pre class="src src-R">debug(sumProd)
</pre>
</div>

<ul class="org-ul">
<li>Cada vez que se llame a la función, su cuerpo se ejecuta línea a línea y los resultados de cada paso pueden ser inspeccionados.</li>
<li>Los comandos disponibles son:
<ul class="org-ul">
<li><code>n</code> o intro: avanzar un paso.</li>
<li><code>c</code>: continua hasta el final del contexto actual (por ejemplo,
terminar un bucle).</li>
<li><code>where</code>: entrega la lista de todas las llamadas activas.</li>
<li><code>Q</code>: termina la inspección y vuelve al nivel superior.</li>
</ul></li>
<li>Para desactivar el análisis:</li>
</ul>
<div class="org-src-container">
<pre class="src src-R">undebug(sumProd)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgecdd622" class="outline-3">
<h3 id="orgecdd622"><span class="section-number-3">4.3</span> <i>Debugging</i> con RStudio</h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li><a href="https://support.rstudio.com/hc/en-us/articles/205612627-Debugging-with-RStudio">Artículo</a></li>
<li><a href="https://vimeo.com/99375765https://vimeo.com/97831988">Vídeo</a></li>
</ul>
<ul class="org-ul">
<li><a href="http://adv-r.had.co.nz/Exceptions-Debugging.html"><i>Debugging</i> explicado por H. Wickham</a></li>

<li>Ejemplo: grabar en un fichero y usar <i>source</i></li>
</ul>
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">sumSq</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, ...)
    sum(x ^ 2, ...)

<span class="org-function-name">sumProd</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(x, y, ...){
    xs <span class="org-ess-assignment">&lt;-</span> sumSq(x, ...)
    ys <span class="org-ess-assignment">&lt;-</span> sumSq(y, ...)
    xs * ys
}

sumProd(rnorm(10), letters[1:10])
</pre>
</div>

<pre class="example">

Error in x^2 : argumento no-numérico para operador binario
</pre>
</div>
</div>

<div id="outline-container-orgf96a328" class="outline-3">
<h3 id="orgf96a328"><span class="section-number-3">4.4</span> Analizar antes de que ocurra: <code>trace</code></h3>
<div class="outline-text-3" id="text-4-4">
<ul class="org-ul">
<li><code>trace</code> permite mayor control que <code>debug</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-R">trace(sumProd, tracer=browser, exit=browser)
</pre>
</div>

<pre class="example">
[1] "sumProd"
</pre>


<ul class="org-ul">
<li>La función queda modificada</li>
</ul>
<div class="org-src-container">
<pre class="src src-R">sumProd
</pre>
</div>

<pre class="example">
Object with tracing code, class "functionWithTrace"
Original definition: 
function(x, y, ...){
    xs &lt;- sumSq(x, ...)
    ys &lt;- sumSq(y, ...)
    xs * ys
}

## (to see the tracing code, look at body(object))
</pre>


<div class="org-src-container">
<pre class="src src-R">body(sumProd)
</pre>
</div>

<pre class="example">
{
    on.exit(.doTrace(browser(), "on exit"))
    {
        .doTrace(browser(), "on entry")
        {
            xs &lt;- sumSq(x, ...)
            ys &lt;- sumSq(y, ...)
            xs * ys
        }
    }
}
</pre>
</div>
</div>

<div id="outline-container-orga111204" class="outline-3">
<h3 id="orga111204"><span class="section-number-3">4.5</span> Analizar antes de que ocurra: <code>trace</code></h3>
<div class="outline-text-3" id="text-4-5">
<ul class="org-ul">
<li>Los comandos <code>n</code> y <code>c</code> cambian respecto a <code>debug</code>:
<ul class="org-ul">
<li><code>c</code> o intro: avanzar un paso.</li>
<li><code>n</code>: continua hasta el final del contexto actual (por ejemplo,
terminar un bucle).</li>
</ul></li>
<li>Para desactivar</li>
</ul>
<div class="org-src-container">
<pre class="src src-R">untrace(sumProd)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcbbfe4c" class="outline-2">
<h2 id="orgcbbfe4c"><span class="section-number-2">5</span> Profiling</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgc5fe7a4" class="outline-3">
<h3 id="orgc5fe7a4"><span class="section-number-3">5.1</span> ¿Cuánto tarda mi función? <code>system.time</code></h3>
<div class="outline-text-3" id="text-5-1">
<p>
Defino una función que rellena una matriz de 10<sup>6</sup> filas y <code>n</code> columnas con una distribución normal:
</p>
<div class="org-src-container">
<pre class="src src-R"><span class="org-function-name">makeNoise</span> <span class="org-ess-assignment">&lt;-</span> <span class="org-ess-keyword">function</span>(n){
    sapply(seq_len(n), <span class="org-ess-keyword">function</span>(i) rnorm(1e6))
}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-R">M <span class="org-ess-assignment">&lt;-</span> makeNoise(100)
summary(M)
</pre>
</div>

<pre class="example">

       V1                  V2                  V3           
 Min.   :-4.850557   Min.   :-4.794546   Min.   :-4.959313  
 1st Qu.:-0.676386   1st Qu.:-0.675196   1st Qu.:-0.673844  
 Median :-0.000827   Median :-0.000570   Median :-0.001241  
 Mean   :-0.001329   Mean   :-0.000532   Mean   : 0.000115  
 3rd Qu.: 0.673604   3rd Qu.: 0.674320   3rd Qu.: 0.673666  
 Max.   : 4.937682   Max.   : 4.724857   Max.   : 4.829274  
       V4                  V5                  V6           
 Min.   :-4.746586   Min.   :-4.418662   Min.   :-4.922335  
 1st Qu.:-0.672089   1st Qu.:-0.675456   1st Qu.:-0.675237  
 Median : 0.000235   Median : 0.000346   Median :-0.001352  
 Mean   : 0.000877   Mean   :-0.000081   Mean   :-0.000835  
 3rd Qu.: 0.672989   3rd Qu.: 0.673988   3rd Qu.: 0.674756  
 Max.   : 5.064697   Max.   : 5.112633   Max.   : 4.896000  
       V7                  V8                  V9           
 Min.   :-4.644428   Min.   :-4.627102   Min.   :-5.352816  
 1st Qu.:-0.672574   1st Qu.:-0.673407   1st Qu.:-0.674217  
 Median : 0.002164   Median : 0.000271   Median :-0.000229  
 Mean   : 0.002565   Mean   : 0.000547   Mean   : 0.000024  
 3rd Qu.: 0.677710   3rd Qu.: 0.674456   3rd Qu.: 0.675413  
 Max.   : 4.618701   Max.   : 4.601317   Max.   : 4.949978  
      V10                 V11                 V12           
 Min.   :-5.027927   Min.   :-4.903829   Min.   :-4.697789  
 1st Qu.:-0.675302   1st Qu.:-0.674489   1st Qu.:-0.675601  
 Median :-0.000820   Median :-0.000714   Median :-0.001707  
 Mean   :-0.000438   Mean   :-0.000620   Mean   :-0.001225  
 3rd Qu.: 0.675767   3rd Qu.: 0.674138   3rd Qu.: 0.673670  
 Max.   : 5.346777   Max.   : 4.676823   Max.   : 4.580514  
      V13                 V14                 V15           
 Min.   :-4.509624   Min.   :-5.036134   Min.   :-4.782108  
 1st Qu.:-0.673944   1st Qu.:-0.674532   1st Qu.:-0.673579  
 Median : 0.000975   Median : 0.000433   Median : 0.000503  
 Mean   : 0.000949   Mean   : 0.000039   Mean   : 0.000373  
 3rd Qu.: 0.675379   3rd Qu.: 0.674557   3rd Qu.: 0.673238  
 Max.   : 4.909678   Max.   : 4.641636   Max.   : 4.858559  
      V16                 V17                 V18           
 Min.   :-4.840236   Min.   :-4.884061   Min.   :-4.802291  
 1st Qu.:-0.676883   1st Qu.:-0.674009   1st Qu.:-0.676295  
 Median :-0.001808   Median :-0.000962   Median : 0.000528  
 Mean   :-0.000204   Mean   : 0.000562   Mean   :-0.000269  
 3rd Qu.: 0.677312   3rd Qu.: 0.674364   3rd Qu.: 0.675237  
 Max.   : 5.173266   Max.   : 4.633160   Max.   : 4.861439  
      V19                 V20                 V21           
 Min.   :-4.734104   Min.   :-4.628800   Min.   :-4.998211  
 1st Qu.:-0.676435   1st Qu.:-0.675693   1st Qu.:-0.675295  
 Median :-0.000923   Median :-0.000543   Median : 0.001051  
 Mean   :-0.001369   Mean   : 0.000363   Mean   : 0.000287  
 3rd Qu.: 0.672723   3rd Qu.: 0.675628   3rd Qu.: 0.676204  
 Max.   : 4.519534   Max.   : 4.770924   Max.   : 4.872298  
      V22                 V23                 V24           
 Min.   :-4.584718   Min.   :-5.008954   Min.   :-4.962820  
 1st Qu.:-0.674432   1st Qu.:-0.675657   1st Qu.:-0.673911  
 Median :-0.001037   Median : 0.000553   Median :-0.000414  
 Mean   :-0.001069   Mean   :-0.000315   Mean   : 0.000217  
 3rd Qu.: 0.672974   3rd Qu.: 0.673243   3rd Qu.: 0.674113  
 Max.   : 4.896479   Max.   : 5.849746   Max.   : 4.723353  
      V25                 V26                 V27           
 Min.   :-4.648474   Min.   :-5.041275   Min.   :-5.076685  
 1st Qu.:-0.673811   1st Qu.:-0.675506   1st Qu.:-0.673777  
 Median : 0.001180   Median :-0.000345   Median : 0.001884  
 Mean   : 0.000649   Mean   : 0.000347   Mean   : 0.001570  
 3rd Qu.: 0.674306   3rd Qu.: 0.676356   3rd Qu.: 0.675758  
 Max.   : 4.820999   Max.   : 4.928471   Max.   : 4.949749  
      V28                 V29                 V30           
 Min.   :-4.782954   Min.   :-5.421742   Min.   :-5.172364  
 1st Qu.:-0.675536   1st Qu.:-0.675365   1st Qu.:-0.672259  
 Median :-0.000095   Median :-0.001912   Median : 0.001398  
 Mean   :-0.001065   Mean   :-0.001701   Mean   : 0.001383  
 3rd Qu.: 0.672350   3rd Qu.: 0.672334   3rd Qu.: 0.675230  
 Max.   : 5.436804   Max.   : 5.085306   Max.   : 4.964369  
      V31                 V32                 V33           
 Min.   :-4.667793   Min.   :-4.833797   Min.   :-4.694007  
 1st Qu.:-0.675107   1st Qu.:-0.671960   1st Qu.:-0.674966  
 Median :-0.001197   Median : 0.001690   Median : 0.001354  
 Mean   :-0.000142   Mean   : 0.002202   Mean   : 0.000867  
 3rd Qu.: 0.675070   3rd Qu.: 0.676421   3rd Qu.: 0.674366  
 Max.   : 4.787195   Max.   : 4.699088   Max.   : 5.010420  
      V34                 V35                 V36           
 Min.   :-5.446058   Min.   :-4.533631   Min.   :-4.752244  
 1st Qu.:-0.673664   1st Qu.:-0.674191   1st Qu.:-0.672597  
 Median : 0.001297   Median : 0.000455   Median : 0.001093  
 Mean   : 0.000679   Mean   :-0.000148   Mean   : 0.001487  
 3rd Qu.: 0.673649   3rd Qu.: 0.674547   3rd Qu.: 0.675785  
 Max.   : 5.414420   Max.   : 5.189383   Max.   : 4.849343  
      V37                 V38                 V39           
 Min.   :-4.807822   Min.   :-4.922465   Min.   :-4.574132  
 1st Qu.:-0.675665   1st Qu.:-0.673740   1st Qu.:-0.674085  
 Median :-0.000619   Median : 0.001534   Median : 0.000419  
 Mean   :-0.000317   Mean   : 0.001441   Mean   : 0.000211  
 3rd Qu.: 0.674693   3rd Qu.: 0.675951   3rd Qu.: 0.675237  
 Max.   : 4.711566   Max.   : 5.234585   Max.   : 4.912451  
      V40                 V41                 V42           
 Min.   :-4.742904   Min.   :-5.386501   Min.   :-4.999125  
 1st Qu.:-0.674248   1st Qu.:-0.674838   1st Qu.:-0.672386  
 Median : 0.000948   Median :-0.001003   Median : 0.001399  
 Mean   :-0.000004   Mean   :-0.000596   Mean   : 0.001309  
 3rd Qu.: 0.674465   3rd Qu.: 0.673916   3rd Qu.: 0.676335  
 Max.   : 4.915512   Max.   : 4.789493   Max.   : 4.707417  
      V43                 V44                 V45           
 Min.   :-4.753084   Min.   :-4.709842   Min.   :-5.273677  
 1st Qu.:-0.674923   1st Qu.:-0.674049   1st Qu.:-0.674362  
 Median :-0.000884   Median : 0.000834   Median : 0.000490  
 Mean   :-0.000630   Mean   :-0.000506   Mean   : 0.000223  
 3rd Qu.: 0.674982   3rd Qu.: 0.673910   3rd Qu.: 0.673923  
 Max.   : 4.932571   Max.   : 5.026923   Max.   : 4.653212  
      V46                 V47                 V48           
 Min.   :-4.996664   Min.   :-4.738134   Min.   :-4.859197  
 1st Qu.:-0.676372   1st Qu.:-0.673854   1st Qu.:-0.674312  
 Median :-0.000825   Median : 0.001036   Median :-0.000106  
 Mean   :-0.000718   Mean   : 0.000624   Mean   :-0.000005  
 3rd Qu.: 0.674396   3rd Qu.: 0.674806   3rd Qu.: 0.674820  
 Max.   : 5.120740   Max.   : 5.081875   Max.   : 4.877178  
      V49                 V50                 V51           
 Min.   :-4.953889   Min.   :-4.520459   Min.   :-4.708236  
 1st Qu.:-0.675264   1st Qu.:-0.673504   1st Qu.:-0.673751  
 Median :-0.000249   Median :-0.001242   Median : 0.000700  
 Mean   :-0.000428   Mean   :-0.000663   Mean   : 0.000855  
 3rd Qu.: 0.674614   3rd Qu.: 0.673366   3rd Qu.: 0.676419  
 Max.   : 4.985089   Max.   : 4.661399   Max.   : 4.840113  
      V52                 V53                 V54           
 Min.   :-4.862482   Min.   :-5.107180   Min.   :-5.798235  
 1st Qu.:-0.674127   1st Qu.:-0.675357   1st Qu.:-0.674056  
 Median :-0.000690   Median :-0.001088   Median :-0.002170  
 Mean   :-0.001007   Mean   :-0.000679   Mean   :-0.001286  
 3rd Qu.: 0.673654   3rd Qu.: 0.672905   3rd Qu.: 0.672970  
 Max.   : 4.751464   Max.   : 5.179290   Max.   : 4.702111  
      V55                 V56                 V57           
 Min.   :-5.005057   Min.   :-5.060830   Min.   :-5.105633  
 1st Qu.:-0.673712   1st Qu.:-0.676715   1st Qu.:-0.673642  
 Median :-0.001579   Median :-0.000958   Median : 0.001118  
 Mean   :-0.000529   Mean   :-0.001274   Mean   : 0.000237  
 3rd Qu.: 0.674349   3rd Qu.: 0.672709   3rd Qu.: 0.674212  
 Max.   : 4.658009   Max.   : 4.753345   Max.   : 4.951854  
      V58                 V59                 V60           
 Min.   :-4.822032   Min.   :-4.776918   Min.   :-4.640167  
 1st Qu.:-0.672959   1st Qu.:-0.674258   1st Qu.:-0.674527  
 Median : 0.001876   Median :-0.001701   Median :-0.001111  
 Mean   : 0.001451   Mean   :-0.000080   Mean   :-0.000308  
 3rd Qu.: 0.676163   3rd Qu.: 0.674081   3rd Qu.: 0.674874  
 Max.   : 4.719650   Max.   : 4.674338   Max.   : 4.794550  
      V61                 V62                 V63           
 Min.   :-4.967301   Min.   :-4.366678   Min.   :-4.801026  
 1st Qu.:-0.674279   1st Qu.:-0.673558   1st Qu.:-0.675316  
 Median :-0.000496   Median :-0.000239   Median : 0.000897  
 Mean   :-0.001024   Mean   : 0.000339   Mean   : 0.000617  
 3rd Qu.: 0.673062   3rd Qu.: 0.674447   3rd Qu.: 0.676415  
 Max.   : 4.704742   Max.   : 4.800138   Max.   : 4.992336  
      V64                 V65                 V66           
 Min.   :-5.160700   Min.   :-4.720091   Min.   :-4.869707  
 1st Qu.:-0.675937   1st Qu.:-0.675230   1st Qu.:-0.677457  
 Median : 0.000050   Median :-0.000026   Median :-0.004332  
 Mean   :-0.000888   Mean   : 0.000342   Mean   :-0.002243  
 3rd Qu.: 0.673925   3rd Qu.: 0.675889   3rd Qu.: 0.672396  
 Max.   : 5.233259   Max.   : 4.550943   Max.   : 4.574867  
      V67                 V68                 V69           
 Min.   :-4.863161   Min.   :-5.044760   Min.   :-5.093013  
 1st Qu.:-0.673692   1st Qu.:-0.675270   1st Qu.:-0.673751  
 Median :-0.001351   Median :-0.000887   Median :-0.000434  
 Mean   :-0.000251   Mean   : 0.000325   Mean   :-0.000079  
 3rd Qu.: 0.674305   3rd Qu.: 0.675674   3rd Qu.: 0.676045  
 Max.   : 5.108234   Max.   : 5.261013   Max.   : 4.745168  
      V70                 V71                 V72           
 Min.   :-4.756397   Min.   :-4.936753   Min.   :-4.474239  
 1st Qu.:-0.673857   1st Qu.:-0.673124   1st Qu.:-0.675507  
 Median : 0.002404   Median : 0.001445   Median :-0.000661  
 Mean   : 0.000838   Mean   : 0.001182   Mean   : 0.000048  
 3rd Qu.: 0.674465   3rd Qu.: 0.676302   3rd Qu.: 0.675517  
 Max.   : 4.744661   Max.   : 5.116368   Max.   : 4.921679  
      V73                 V74                 V75           
 Min.   :-4.827140   Min.   :-4.856865   Min.   :-4.779098  
 1st Qu.:-0.675988   1st Qu.:-0.673974   1st Qu.:-0.676952  
 Median : 0.000424   Median :-0.001063   Median : 0.001478  
 Mean   : 0.000151   Mean   :-0.000969   Mean   :-0.000148  
 3rd Qu.: 0.674845   3rd Qu.: 0.671933   3rd Qu.: 0.674716  
 Max.   : 4.846236   Max.   : 4.655334   Max.   : 4.461740  
      V76                 V77                 V78           
 Min.   :-4.653744   Min.   :-4.406902   Min.   :-4.718347  
 1st Qu.:-0.674304   1st Qu.:-0.673636   1st Qu.:-0.674781  
 Median : 0.001131   Median : 0.002247   Median :-0.000615  
 Mean   : 0.000609   Mean   : 0.000869   Mean   :-0.000468  
 3rd Qu.: 0.674453   3rd Qu.: 0.674921   3rd Qu.: 0.673226  
 Max.   : 5.264564   Max.   : 4.795977   Max.   : 5.220267  
      V79                 V80                 V81           
 Min.   :-4.880356   Min.   :-4.988047   Min.   :-4.913894  
 1st Qu.:-0.675600   1st Qu.:-0.676624   1st Qu.:-0.672188  
 Median :-0.001672   Median :-0.002173   Median :-0.001573  
 Mean   :-0.001071   Mean   :-0.001445   Mean   :-0.000749  
 3rd Qu.: 0.674288   3rd Qu.: 0.673656   3rd Qu.: 0.672490  
 Max.   : 4.748778   Max.   : 4.935536   Max.   : 4.681703  
      V82                 V83                 V84           
 Min.   :-4.883418   Min.   :-4.901276   Min.   :-5.079876  
 1st Qu.:-0.674083   1st Qu.:-0.672021   1st Qu.:-0.675706  
 Median :-0.000996   Median :-0.000583   Median :-0.000639  
 Mean   :-0.000086   Mean   : 0.000978   Mean   : 0.000049  
 3rd Qu.: 0.673292   3rd Qu.: 0.674668   3rd Qu.: 0.675364  
 Max.   : 4.944165   Max.   : 4.944620   Max.   : 4.569763  
      V85                 V86                 V87           
 Min.   :-4.641984   Min.   :-4.949596   Min.   :-4.611695  
 1st Qu.:-0.675703   1st Qu.:-0.676107   1st Qu.:-0.673572  
 Median : 0.000791   Median :-0.000695   Median :-0.000016  
 Mean   :-0.000274   Mean   :-0.001878   Mean   : 0.000228  
 3rd Qu.: 0.674507   3rd Qu.: 0.672439   3rd Qu.: 0.674904  
 Max.   : 5.031343   Max.   : 5.217666   Max.   : 5.637254  
      V88                 V89                 V90           
 Min.   :-5.004213   Min.   :-4.761411   Min.   :-4.885385  
 1st Qu.:-0.671865   1st Qu.:-0.673912   1st Qu.:-0.676176  
 Median : 0.001239   Median : 0.000242   Median :-0.001612  
 Mean   : 0.002014   Mean   : 0.000157   Mean   :-0.001368  
 3rd Qu.: 0.676138   3rd Qu.: 0.674306   3rd Qu.: 0.672445  
 Max.   : 4.986575   Max.   : 4.730267   Max.   : 4.723730  
      V91                 V92                 V93           
 Min.   :-4.446145   Min.   :-5.038213   Min.   :-4.968904  
 1st Qu.:-0.673762   1st Qu.:-0.673108   1st Qu.:-0.674537  
 Median : 0.001250   Median : 0.002066   Median : 0.000254  
 Mean   : 0.000878   Mean   : 0.002104   Mean   : 0.000594  
 3rd Qu.: 0.676381   3rd Qu.: 0.676996   3rd Qu.: 0.675007  
 Max.   : 4.925884   Max.   : 4.868710   Max.   : 4.980750  
      V94                 V95                 V96           
 Min.   :-4.585104   Min.   :-4.782599   Min.   :-5.465619  
 1st Qu.:-0.675851   1st Qu.:-0.675098   1st Qu.:-0.672931  
 Median : 0.000276   Median :-0.002806   Median : 0.001174  
 Mean   :-0.001256   Mean   :-0.001156   Mean   : 0.001409  
 3rd Qu.: 0.672974   3rd Qu.: 0.673394   3rd Qu.: 0.676320  
 Max.   : 5.144434   Max.   : 5.329044   Max.   : 4.860244  
      V97                 V98                 V99           
 Min.   :-4.562743   Min.   :-4.924833   Min.   :-4.946087  
 1st Qu.:-0.673969   1st Qu.:-0.674671   1st Qu.:-0.672491  
 Median :-0.001026   Median : 0.000308   Median : 0.001414  
 Mean   :-0.000260   Mean   :-0.000628   Mean   : 0.001663  
 3rd Qu.: 0.672525   3rd Qu.: 0.672930   3rd Qu.: 0.675098  
 Max.   : 4.627507   Max.   : 4.670783   Max.   : 4.471793  
      V100          
 Min.   :-5.108010  
 1st Qu.:-0.673406  
 Median : 0.000605  
 Mean   : 0.000219  
 3rd Qu.: 0.675098  
 Max.   : 4.465086
</pre>
</div>
</div>

<div id="outline-container-orgf54633d" class="outline-3">
<h3 id="orgf54633d"><span class="section-number-3">5.2</span> Diferentes formas de sumar</h3>
<div class="outline-text-3" id="text-5-2">
<p>
<code>system.time</code> mide el tiempo de CPU que consume un código<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>.
</p>

<div class="org-src-container">
<pre class="src src-R">system.time({
    suma1 <span class="org-ess-assignment">&lt;-</span> numeric(1e6)
    <span class="org-ess-keyword">for</span>(i <span class="org-ess-keyword">in</span> 1:1e6) suma1[i] <span class="org-ess-assignment">&lt;-</span> sum(M[i,])
})
</pre>
</div>

<pre class="example">

 user  system elapsed 
1.565   0.008   2.090
</pre>


<div class="org-src-container">
<pre class="src src-R">system.time(suma2 <span class="org-ess-assignment">&lt;-</span> apply(M, 1, sum))
</pre>
</div>

<pre class="example">
 user  system elapsed 
2.718   0.028   2.747
</pre>


<div class="org-src-container">
<pre class="src src-R">system.time(suma3 <span class="org-ess-assignment">&lt;-</span> rowSums(M))
</pre>
</div>

<pre class="example">
 user  system elapsed 
0.323   0.000   0.323
</pre>
</div>
</div>


<div id="outline-container-orgd8a5126" class="outline-3">
<h3 id="orgd8a5126"><span class="section-number-3">5.3</span> ¿Cuánto tarda cada parte de mi función?: <code>Rprof</code></h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li>Usaremos un fichero temporal</li>
</ul>
<div class="org-src-container">
<pre class="src src-R">tmp <span class="org-ess-assignment">&lt;-</span> tempfile()
</pre>
</div>

<ul class="org-ul">
<li>Activamos la toma de información</li>
</ul>
<div class="org-src-container">
<pre class="src src-R">Rprof(tmp)
</pre>
</div>

<ul class="org-ul">
<li>Ejecutamos el código a analizar</li>
</ul>
<div class="org-src-container">
<pre class="src src-R">suma1 <span class="org-ess-assignment">&lt;-</span> numeric(1e6)
<span class="org-ess-keyword">for</span>(i <span class="org-ess-keyword">in</span> 1:1e6) suma1[i] <span class="org-ess-assignment">&lt;-</span> sum(M[i,])

suma2 <span class="org-ess-assignment">&lt;-</span> apply(M, 1, FUN = sum)

suma3 <span class="org-ess-assignment">&lt;-</span> rowSums(M)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf0f9ad7" class="outline-3">
<h3 id="orgf0f9ad7"><span class="section-number-3">5.4</span> ¿Cuánto tarda cada parte de mi función?: <code>Rprof</code></h3>
<div class="outline-text-3" id="text-5-4">
<ul class="org-ul">
<li>Paramos el análisis</li>
</ul>
<div class="org-src-container">
<pre class="src src-R">Rprof()
</pre>
</div>

<ul class="org-ul">
<li>Extraemos el resumen</li>
</ul>
<div class="org-src-container">
<pre class="src src-R">summaryRprof(tmp)
</pre>
</div>

<pre class="example">
$by.self
                self.time self.pct total.time total.pct
"apply"              1.64    50.00       2.62     79.88
"aperm.default"      0.46    14.02       0.46     14.02
"FUN"                0.46    14.02       0.46     14.02
"rowSums"            0.34    10.37       0.34     10.37
"sum"                0.32     9.76       0.32      9.76
"unlist"             0.04     1.22       0.04      1.22
"lengths"            0.02     0.61       0.02      0.61

$by.total
                total.time total.pct self.time self.pct
"apply"               2.62     79.88      1.64    50.00
"aperm.default"       0.46     14.02      0.46    14.02
"FUN"                 0.46     14.02      0.46    14.02
"aperm"               0.46     14.02      0.00     0.00
"rowSums"             0.34     10.37      0.34    10.37
"sum"                 0.32      9.76      0.32     9.76
"unlist"              0.04      1.22      0.04     1.22
"lengths"             0.02      0.61      0.02     0.61

$sample.interval
[1] 0.02

$sampling.time
[1] 3.28
</pre>
</div>
</div>
</div>

<div id="outline-container-org3a1b4c9" class="outline-2">
<h2 id="org3a1b4c9"><span class="section-number-2">6</span> Ejercicios</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org08a03fa" class="outline-3">
<h3 id="org08a03fa"><span class="section-number-3">6.1</span> Áreas de figuras geométricas</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Escribe una función que calcule el área de un círculo, un triángulo o un cuadrado. La función empleará, a su vez, una función diferente definida para cada caso.
</p>
</div>
</div>

<div id="outline-container-orgb986383" class="outline-3">
<h3 id="orgb986383"><span class="section-number-3">6.2</span> Conversión de temperaturas</h3>
<div class="outline-text-3" id="text-6-2">
<p>
  Escribe una función para realizar la conversión de temperaturas. La función trabajará a partir de un valor (número real) y una letra. La letra indica la escala en la que se introduce esa temperatura. Si la letra es &rsquo;C&rsquo;, la temperatura se convertirá de grados centígrados a Fahrenheit. Si la letra es &rsquo;F&rsquo; la temperatura se convertirá de grados Fahrenheit a grados Centígrados. 
Se usarán 2 funciones auxiliares, <code>cent2fahr</code> y <code>fahr2cent</code> para convertir de una escala a otra. Estas funciones aceptan un parámetro (la temperatura en una escala) y devuelven el valor en la otra escala. 
</p>

<p>
Nota: La relación entre ambas escalas es \(T_F = 9/5 \cdot T_C + 32\)
</p>
</div>
</div>

<div id="outline-container-org841ae68" class="outline-3">
<h3 id="org841ae68"><span class="section-number-3">6.3</span> Tablas de multiplicar</h3>
<div class="outline-text-3" id="text-6-3">
<p>
Construye un programa que muestre por pantalla las tablas de multiplicar del 1 al 10, a partir de dos funciones específicas. La primera función debe devolver el producto de dos valores numéricos enteros dados como parámetros. La segunda función debe mostrar por pantalla la tabla de multiplicar de un número dado como parámetro.
</p>
</div>
</div>

<div id="outline-container-orgb3edb3d" class="outline-3">
<h3 id="orgb3edb3d"><span class="section-number-3">6.4</span> Números combinatorios</h3>
<div class="outline-text-3" id="text-6-4">
<p>
Escribe una función que calcule y muestre en pantalla el número combinatorio a partir de los valores <code>n</code> y <code>k</code>.
</p>

<p>
\[
 nk = \frac{n!}{(n - k)! \cdot k!}
 \]
</p>

<p>
Esta función debe estar construida en base a dos funciones auxiliares, una para calcular el factorial de un número, y otra para calcular el número combinatorio.
</p>
</div>
</div>

<div id="outline-container-org68d86fb" class="outline-3">
<h3 id="org68d86fb"><span class="section-number-3">6.5</span> Fibonacci</h3>
<div class="outline-text-3" id="text-6-5">
<p>
Escribe una <b>función recursiva</b> que genere los <code>n</code> primeros términos de la serie de Fibonacci. Esta función aceptará el número entero <code>n</code> como argumento. Este valor debe ser positivo, de forma que si el usuario introduce un valor negativo la función devolverá un error.
</p>

<p>
Nota: En la serie de Fibonacci los dos primeros números son 1, y el resto se obtiene sumando los dos anteriores: \(1, 1, 2, 3, 5, 8, 13, 21, \ldots\)
</p>
</div>
</div>

<div id="outline-container-orgdbe4666" class="outline-3">
<h3 id="orgdbe4666"><span class="section-number-3">6.6</span> Serie de Taylor</h3>
<div class="outline-text-3" id="text-6-6">
<p>
Escribe un conjunto de funciones para calcular la aproximación de \(e ^ {-x}\) mediante el desarrollo de Taylor:
</p>

<p>
\[
  e^{-x} = 1 + \sum_{i = 1}^\infty \frac{(-x)^n}{n!}
  \]
</p>

<p>
La función principal acepta como argumentos el valor del número real <code>x</code> y el número de términos deseados. Se basará en otras tres funciones: 
</p>

<ul class="org-ul">
<li><code>factorial</code> calcula el factorial de un número entero <code>n</code>.</li>

<li><code>potencia</code> calcula la potencia <code>n</code> de un número real <code>x</code>.</li>

<li><code>exponencial</code> calcula la aproximación anterior de un número real <code>x</code> usando <code>n</code> términos de la serie de Taylor.</li>
</ul>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Nota al pie de p&aacute;gina: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
Para entender la diferencia entre <code>user</code> y <code>system</code> véase explicación <a href="http://r.789695.n4.nabble.com/Meaning-of-proc-time-tp2303263p2306691.html">aquí</a>. 
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Autor: <a href="https://oscarperpinan.github.io">Oscar Perpiñán Lamigueiro</a></p>
<p class="date">Created: 2020-02-17 lun 23:25</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
