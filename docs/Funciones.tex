% Created 2019-05-22 mié 20:21
% Intended LaTeX compiler: pdflatex
\documentclass[xcolor={usenames,svgnames,dvipsnames}]{beamer}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\usepackage{color}
\usepackage{listings}
\usepackage[spanish]{babel}
\setbeamercolor{alerted text}{fg=Blue}
\setbeamerfont{alerted text}{series=\bfseries}
\setbeamercolor{block title}{bg=structure.fg!20!bg!50!bg}
\setbeamercolor{block body}{use=block title,bg=block title.bg}
\AtBeginSubsection[]{\begin{frame}[plain]\tableofcontents[currentsubsection,sectionstyle=show/shaded,subsectionstyle=show/shaded/hide]\end{frame}}
\AtBeginSection[]{\begin{frame}[plain]\tableofcontents[currentsection,hideallsubsections]\end{frame}}
\lstset{keywordstyle=\color{blue}, commentstyle=\color{gray!90}, basicstyle=\ttfamily\small, columns=fullflexible, breaklines=true,linewidth=\textwidth, backgroundcolor=\color{gray!23}, basewidth={0.5em,0.4em}, literate={á}{{\'a}}1 {ñ}{{\~n}}1 {é}{{\'e}}1 {ó}{{\'o}}1 {º}{{\textordmasculine}}1, showstringspaces=false}
\usepackage{mathpazo}
\hypersetup{colorlinks=true, linkcolor=Blue, urlcolor=Blue}
\usepackage{fancyvrb}
\DefineVerbatimEnvironment{verbatim}{Verbatim}{fontsize=\tiny, formatcom = {\color{black!70}}}
\beamertemplatenavigationsymbolsempty
\setbeamertemplate{footline}[frame number]
\AtBeginSection[]{\begin{frame}[plain]\tableofcontents[currentsection,sectionstyle=show/shaded]\end{frame}}
\usetheme{Boadilla}
\usecolortheme{rose}
\usefonttheme{serif}
\author{Oscar Perpiñán Lamigueiro \\ \url{http://oscarperpinan.github.io}}
\date{}
\title{Funciones}
\hypersetup{
 pdfauthor={Oscar Perpiñán Lamigueiro \\ \url{http://oscarperpinan.github.io}},
 pdftitle={Funciones},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 26.1 (Org mode 9.2)}, 
 pdflang={Spanish}}
\begin{document}

\maketitle


\section{Conceptos Básicos}
\label{sec:org90fb4bd}

\begin{frame}[label={sec:orgba86409}]{Fuentes de información}
\begin{itemize}
\item \href{http://cran.r-project.org/doc/manuals/R-intro.html}{R introduction}
\item \href{http://cran.r-project.org/doc/manuals/R-lang.html}{R Language Definition}
\item \href{http://www.springer.com/gb/book/9780387759357}{Software for Data Analysis}
\end{itemize}
\end{frame}
\begin{frame}[label={sec:org739898e},fragile]{Componentes de una función}
 \begin{itemize}
\item Una función se define con \texttt{function}
\end{itemize}
\begin{center}
\texttt{name <- function(arg\_1, arg\_2, ...) expression}
\end{center}
\begin{itemize}
\item Está compuesta por:
\begin{itemize}
\item Nombre de la función (\texttt{name})
\item Argumentos (\texttt{arg\_1}, \texttt{arg\_2}, \texttt{...})
\item Cuerpo (\texttt{expression}): emplea los argumentos para generar un resultado
\end{itemize}
\end{itemize}
\end{frame}
\begin{frame}[label={sec:orgd678c5a},fragile]{Mi primera función}
 \begin{itemize}
\item Definición
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
myFun <- function(x, y)
{
    x + y
}
\end{lstlisting}

\begin{itemize}
\item Argumentos
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
formals(myFun)
\end{lstlisting}

\begin{verbatim}
$x


$y
\end{verbatim}


\begin{itemize}
\item Cuerpo
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
body(myFun)
\end{lstlisting}

\begin{verbatim}
{
    x + y
}
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org568a98e},fragile]{Mi primera función}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
myFun(1, 2)
\end{lstlisting}

\begin{verbatim}
[1] 3
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
myFun(1:10, 21:30)
\end{lstlisting}

\begin{verbatim}
[1] 22 24 26 28 30 32 34 36 38 40
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
myFun(1:10, 3)
\end{lstlisting}

\begin{verbatim}
[1]  4  5  6  7  8  9 10 11 12 13
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgae51e27},fragile]{Argumentos: nombre y orden}
 Una función identifica sus argumentos por su nombre y por su orden (sin nombre)

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power <- function(x, exp)
{
    x^exp
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power(x=1:10, exp=2)
\end{lstlisting}

\begin{verbatim}
[1]   1   4   9  16  25  36  49  64  81 100
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power(1:10, exp=2)
\end{lstlisting}

\begin{verbatim}
[1]   1   4   9  16  25  36  49  64  81 100
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power(exp=2, x=1:10)
\end{lstlisting}

\begin{verbatim}
[1]   1   4   9  16  25  36  49  64  81 100
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org1a4cda5},fragile]{Argumentos: valores por defecto}
 \begin{itemize}
\item Se puede asignar un valor por defecto a los argumentos
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power <- function(x, exp = 2)
{
    x ^ exp
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power(1:10)
\end{lstlisting}

\begin{verbatim}
[1]   1   4   9  16  25  36  49  64  81 100
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power(1:10, 2)
\end{lstlisting}

\begin{verbatim}
[1]   1   4   9  16  25  36  49  64  81 100
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org69fa95d},fragile]{Funciones sin argumentos}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
hello <- function()
{
    print('Hello world!')
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
hello()
\end{lstlisting}

\begin{verbatim}
[1] "Hello world!"
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org9630a41},fragile]{Argumentos sin nombre: \texttt{...}}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
pwrSum <- function(x, power, ...)
{
    sum(x ^ power, ...)
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
x <- 1:10
pwrSum(x, 2)
\end{lstlisting}

\begin{verbatim}
[1] 385
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
x <- c(1:5, NA, 6:9, NA, 10)
pwrSum(x, 2)
\end{lstlisting}

\begin{verbatim}
[1] NA
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
pwrSum(x, 2, na.rm=TRUE)
\end{lstlisting}

\begin{verbatim}
[1] 385
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org583e850},fragile]{Argumentos ausentes: \texttt{missing}}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
suma10 <- function(x, y)
{
    if (missing(y)) y <- 10
    x + y
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
suma10(1:10)
\end{lstlisting}

\begin{verbatim}
[1] 11 12 13 14 15 16 17 18 19 20
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org70517cc},fragile]{Control de errores: \texttt{stopifnot}}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo <- function(x, y)
{
    stopifnot(is.numeric(x) & is.numeric(y))
    x + y
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo(1:10, 21:30)
\end{lstlisting}

\begin{verbatim}
[1] 22 24 26 28 30 32 34 36 38 40
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo(1:10, 'a')
\end{lstlisting}

\begin{verbatim}
Error in foo(1:10, "a") : is.numeric(x) & is.numeric(y) is not TRUE
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgf0627b3},fragile]{Control de errores: \texttt{stop}}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo <- function(x, y){
    if (!(is.numeric(x) & is.numeric(y))){
        stop('arguments must be numeric.')
    } else { x + y }
} 
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo(2, 3)
\end{lstlisting}

\begin{verbatim}
[1] 5
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo(2, 'a')
\end{lstlisting}

\begin{verbatim}
Error in foo(2, "a") : arguments must be numeric.
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org038524d},fragile]{Mensajes para el usuario}
 \texttt{stop} para la ejecución y emite un mensaje de error
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
stop('Algo no ha ido bien.')
\end{lstlisting}

\begin{verbatim}
Error: Algo no ha ido bien.
\end{verbatim}


\texttt{warning} no interfiere en la ejecución pero añade un mensaje a la cola de advertencias
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
warning('Quizás algo no es como debiera...')
\end{lstlisting}

\begin{verbatim}
Warning message:
Quizás algo no es como debiera...
\end{verbatim}


\texttt{message} emite un mensaje (\alert{no usar \texttt{cat} o \texttt{print}})
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
message('Todo en orden por estos lares.')
\end{lstlisting}

\begin{verbatim}
Todo en orden por estos lares.
\end{verbatim}
\end{frame}


\section{Lexical scope}
\label{sec:org42b3ed7}

\begin{frame}[label={sec:org4231f06},fragile]{Clases de variables}
 Las variables que se emplean en el cuerpo de una función pueden
dividirse en:
\begin{itemize}
\item Parámetros formales (argumentos): \texttt{x}, \texttt{y}
\item Variables locales (definiciones internas): \texttt{z}, \texttt{w}, \texttt{m}
\item Variables libres: \texttt{a}, \texttt{b}
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
myFun <- function(x, y){
    z <- x^2
    w <- y^3
    m <- a*z + b*w
    m
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
a <- 10
b <- 20
myFun(2, 3)
\end{lstlisting}

\begin{verbatim}
[1] 580
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgb43f2f9},fragile]{Lexical scope}
 \begin{itemize}
\item Las variables libres deben estar disponibles en el entorno
(\texttt{environment}) en el que la función ha sido creada.
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
environment(myFun) 
\end{lstlisting}

\begin{verbatim}
<environment: R_GlobalEnv>
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
ls()
\end{lstlisting}

\begin{verbatim}
 [1] "a"               "anidada"         "b"               "constructor"    
 [5] "diamonds"        "fib"             "foo"             "hello"          
 [9] "i"               "lista"           "ll"              "lmFertEduCatAgr"
[13] "m"               "M"               "makeNoise"       "myFoo"          
[17] "myFun"           "power"           "pwrSum"          "suma1"          
[21] "suma10"          "suma2"           "suma3"           "sumProd"        
[25] "sumSq"           "tmp"             "x"               "zz"
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org405410b},fragile]{Lexical scope: funciones anidadas}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
anidada <- function(x, y){
    xn <- 2
    yn <- 3
    interna <- function(x, y)
    {
        sum(x^xn, y^yn)
    }
    print(environment(interna))
    interna(x, y)
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
anidada(1:3, 2:4)
\end{lstlisting}

\begin{verbatim}
<environment: 0x55e3ae6bec90>
[1] 113
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sum((1:3)^2, (2:4)^3)
\end{lstlisting}

\begin{verbatim}
[1] 113
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org1e90b54},fragile]{Lexical scope: funciones anidadas}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
xn
\end{lstlisting}

\begin{verbatim}
Error: objeto 'xn' no encontrado
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
yn
\end{lstlisting}

\begin{verbatim}
Error: objeto 'yn' no encontrado
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
interna
\end{lstlisting}

\begin{verbatim}
Error: objeto 'interna' no encontrado
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org9a6bf12},fragile]{Funciones que devuelven funciones}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
constructor <- function(m, n){
    function(x)
    {
        m*x + n
    }
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
myFoo <- constructor(10, 3)
myFoo
\end{lstlisting}

\begin{verbatim}
function(x)
    {
        m*x + n
    }
<environment: 0x55e3ae654500>
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
## 10*5 + 3
myFoo(5)
\end{lstlisting}

\begin{verbatim}
[1] 53
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orga959dcb},fragile]{Funciones que devuelven funciones}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
class(myFoo)
\end{lstlisting}

\begin{verbatim}
[1] "function"
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
environment(myFoo)
\end{lstlisting}

\begin{verbatim}
<environment: 0x55e3ae654500>
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
ls()
\end{lstlisting}

\begin{verbatim}
 [1] "a"               "anidada"         "b"               "constructor"    
 [5] "diamonds"        "fib"             "foo"             "hello"          
 [9] "i"               "lista"           "ll"              "lmFertEduCatAgr"
[13] "m"               "M"               "makeNoise"       "myFoo"          
[17] "myFun"           "power"           "pwrSum"          "suma1"          
[21] "suma10"          "suma2"           "suma3"           "sumProd"        
[25] "sumSq"           "tmp"             "x"               "zz"
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
ls(env = environment(myFoo))
\end{lstlisting}

\begin{verbatim}
[1] "m" "n"
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
get('m', env = environment(myFoo))
\end{lstlisting}

\begin{verbatim}
[1] 10
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
get('n', env = environment(myFoo))
\end{lstlisting}

\begin{verbatim}
[1] 3
\end{verbatim}
\end{frame}

\section{Funciones para ejecutar funciones}
\label{sec:orgbd6f26d}
\begin{frame}[label={sec:org1d182df},fragile]{\texttt{lapply}}
 Supongamos que tenemos una lista de objetos, y queremos aplicar a cada elemento la misma función:
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
lista <- list(a = rnorm(100),
              b = runif(100),
              c = rexp(100))
\end{lstlisting}

Podemos resolverlo de forma repetitiva\ldots{}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sum(lista$a)

sum(lista$b)

sum(lista$c)
\end{lstlisting}

\begin{verbatim}
[1] -0.5135241
[1] 53.80815
[1] 85.80208
\end{verbatim}


O mejor con \texttt{lapply} (lista + función):
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
lapply(lista, sum)
\end{lstlisting}

\begin{verbatim}
$a
[1] -0.5135241

$b
[1] 53.80815

$c
[1] 85.80208
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgcf8f19a},fragile]{\texttt{do.call}}
 Supongamos que queremos usar los elementos de la lista como argumentos de una función.

Resolvemos de forma directa:
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sum(lista$a, lista$b, lista$c)
\end{lstlisting}

\begin{verbatim}
[1] 139.0967
\end{verbatim}


Mejoramos \emph{un poco} con \texttt{with}:
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
with(lista, sum(a, b, c))
\end{lstlisting}

\begin{verbatim}
[1] 139.0967
\end{verbatim}


La forma recomendable es mediante \texttt{do.call} (función + lista)
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
do.call(sum, lista)
\end{lstlisting}

\begin{verbatim}
[1] 139.0967
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org80337b1},fragile]{\texttt{do.call}}
 Se emplea frecuentemente para adecuar el resultado de \texttt{lapply} (entrega una lista):
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
  x <- rnorm(5)
  ll <- lapply(1:5, function(i)x^i)
  do.call(rbind, ll)
\end{lstlisting}

\begin{verbatim}
           [,1]      [,2]       [,3]     [,4]     [,5]
[1,] -0.7138158 0.9317848 0.56947704 1.092146 1.219154
[2,]  0.5095330 0.8682229 0.32430410 1.192784 1.486337
[3,] -0.3637127 0.8089969 0.18468374 1.302694 1.812074
[4,]  0.2596239 0.7538110 0.10517315 1.422733 2.209197
[5,] -0.1853236 0.7023897 0.05989369 1.553833 2.693352
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgbeeb4b8},fragile]{\texttt{Reduce}}
 Combina sucesivamente los elementos de un objeto aplicando una función binaria
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
## (((1+2)+3)+4)+5
Reduce('+', 1:5)
\end{lstlisting}

\begin{verbatim}
[1] 15
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orge13435f},fragile]{\texttt{Reduce}}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
## (((1/2)/3)/4)/5
Reduce('/', 1:5)
\end{lstlisting}

\begin{verbatim}
[1] 0.008333333
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo <- function(u, v)u + 1 /v
Reduce(foo, c(3, 7, 15, 1, 292))
## equivalente a
## foo(foo(foo(foo(3, 7), 15), 1), 292)
\end{lstlisting}

\begin{verbatim}
[1] 4.212948
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
Reduce(foo, c(3, 7, 15, 1, 292), right=TRUE)
## equivalente a
## foo(3, foo(7, foo(15, foo(1, 292))))
\end{lstlisting}

\begin{verbatim}
[1] 3.141593
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org54048cf},fragile]{Funciones recursivas}
 Ejemplo: \href{http://en.wikibooks.org/wiki/R\_Programming/Working\_with\_functions\#Functions\_as\_Objects}{Serie de Fibonnaci}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
fib <- function(n){
    if (n>2) {
        c(fib(n-1),
          sum(tail(fib(n-1),2)))
    } else if (n>=0) rep(1,n)
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
fib(10)
\end{lstlisting}

\begin{verbatim}
[1]  1  1  2  3  5  8 13 21 34 55
\end{verbatim}
\end{frame}

\section{Debug}
\label{sec:orgae6e940}

\begin{frame}[label={sec:org4d668ea},fragile]{Post-mortem: \texttt{traceback}}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sumSq <- function(x, ...)
    sum(x ^ 2, ...)

sumProd <- function(x, y, ...){
    xs <- sumSq(x, ...)
    ys <- sumSq(y, ...)
    xs * ys
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sumProd(rnorm(10), runif(10))
\end{lstlisting}

\begin{verbatim}
[1] 40.00681
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sumProd(rnorm(10), letters[1:10])
\end{lstlisting}

\begin{verbatim}
Error in x^2 : argumento no-numérico para operador binario
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
traceback()
\end{lstlisting}

\begin{verbatim}
2: sumSq(y, ...) at #3
1: sumProd(rnorm(10), letters[1:10])
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgb2759af},fragile]{Analizar antes de que ocurra: \texttt{debug}}
 \texttt{debug} activa la ejecución paso a paso de una función:
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
debug(sumProd)
\end{lstlisting}

\begin{itemize}
\item Cada vez que se llame a la función, su cuerpo se ejecuta línea a línea y los resultados de cada paso pueden ser inspeccionados.
\item Los comandos disponibles son:
\begin{itemize}
\item \texttt{n} o intro: avanzar un paso.
\item \texttt{c}: continua hasta el final del contexto actual (por ejemplo,
terminar un bucle).
\item \texttt{where}: entrega la lista de todas las llamadas activas.
\item \texttt{Q}: termina la inspección y vuelve al nivel superior.
\end{itemize}
\item Para desactivar el análisis:
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
undebug(sumProd)
\end{lstlisting}
\end{frame}

\begin{frame}[label={sec:org0fc576c},fragile]{Analizar antes de que ocurra: \texttt{trace}}
 \begin{itemize}
\item \texttt{trace} permite mayor control que \texttt{debug}
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
trace(sumProd, tracer=browser, exit=browser)
\end{lstlisting}

\begin{verbatim}
[1] "sumProd"
\end{verbatim}


\begin{itemize}
\item La función queda modificada
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sumProd
\end{lstlisting}

\begin{verbatim}
Object with tracing code, class "functionWithTrace"
Original definition: 
function(x, y, ...){
    xs <- sumSq(x, ...)
    ys <- sumSq(y, ...)
    xs * ys
}
<bytecode: 0x55e3a6184de0>

## (to see the tracing code, look at body(object))
\end{verbatim}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
body(sumProd)
\end{lstlisting}

\begin{verbatim}
{
    on.exit(.doTrace(browser(), "on exit"))
    {
        .doTrace(browser(), "on entry")
        {
            xs <- sumSq(x, ...)
            ys <- sumSq(y, ...)
            xs * ys
        }
    }
}
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgfa381fd},fragile]{Analizar antes de que ocurra: \texttt{trace}}
 \begin{itemize}
\item Los comandos \texttt{n} y \texttt{c} cambian respecto a \texttt{debug}:
\begin{itemize}
\item \texttt{c} o intro: avanzar un paso.
\item \texttt{n}: continua hasta el final del contexto actual (por ejemplo,
terminar un bucle).
\end{itemize}
\item Para desactivar
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
untrace(sumProd)
\end{lstlisting}
\end{frame}

\begin{frame}[label={sec:org149fb0e}]{Más recursos}
\begin{itemize}
\item Debugging en RStudio
\begin{itemize}
\item \href{https://support.rstudio.com/hc/en-us/articles/205612627-Debugging-with-RStudio}{Artículo}
\item \href{https://vimeo.com/97831988}{Vídeo}
\end{itemize}
\item \href{http://adv-r.had.co.nz/Exceptions-Debugging.html}{\emph{Debugging} explicado por H. Wickham}
\end{itemize}
\end{frame}

\section{Profiling}
\label{sec:org6c21914}
\begin{frame}[label={sec:org4570aee},fragile]{¿Cuánto tarda mi función? \texttt{system.time}}
 Defino una función que rellena una matriz de 10\textsuperscript{6} filas y \texttt{n} columnas con una distribución normal:
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
makeNoise <- function(n){
    sapply(seq_len(n), function(i) rnorm(1e6))
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
M <- makeNoise(100)
summary(M)
\end{lstlisting}

\begin{verbatim}
       V1                  V2                  V3           
 Min.   :-4.734116   Min.   :-4.598497   Min.   :-4.737993  
 1st Qu.:-0.672882   1st Qu.:-0.674885   1st Qu.:-0.673589  
 Median : 0.002169   Median : 0.000201   Median : 0.000154  
 Mean   : 0.001107   Mean   :-0.000276   Mean   : 0.000282  
 3rd Qu.: 0.675470   3rd Qu.: 0.673820   3rd Qu.: 0.674238  
 Max.   : 5.196789   Max.   : 5.751186   Max.   : 4.540216  
       V4                  V5                  V6                 V7           
 Min.   :-4.746465   Min.   :-5.138755   Min.   :-4.98647   Min.   :-4.757454  
 1st Qu.:-0.674177   1st Qu.:-0.672330   1st Qu.:-0.67461   1st Qu.:-0.676046  
 Median : 0.001735   Median : 0.000239   Median :-0.00053   Median :-0.002339  
 Mean   : 0.000301   Mean   :-0.000064   Mean   :-0.00004   Mean   :-0.001178  
 3rd Qu.: 0.674728   3rd Qu.: 0.673775   3rd Qu.: 0.67227   3rd Qu.: 0.674123  
 Max.   : 4.834753   Max.   : 4.986100   Max.   : 4.86728   Max.   : 4.722494  
       V8                  V9                 V10           
 Min.   :-4.895707   Min.   :-5.513674   Min.   :-4.870733  
 1st Qu.:-0.676299   1st Qu.:-0.674142   1st Qu.:-0.675979  
 Median :-0.003492   Median : 0.000204   Median : 0.000763  
 Mean   :-0.001901   Mean   : 0.000042   Mean   :-0.000706  
 3rd Qu.: 0.671765   3rd Qu.: 0.675653   3rd Qu.: 0.674383  
 Max.   : 4.606960   Max.   : 4.785318   Max.   : 4.871267  
      V11                 V12                 V13           
 Min.   :-5.153347   Min.   :-5.277090   Min.   :-4.810390  
 1st Qu.:-0.673566   1st Qu.:-0.671908   1st Qu.:-0.675884  
 Median : 0.001277   Median : 0.002219   Median :-0.001190  
 Mean   :-0.000118   Mean   : 0.001417   Mean   :-0.000823  
 3rd Qu.: 0.674845   3rd Qu.: 0.674619   3rd Qu.: 0.673088  
 Max.   : 5.031631   Max.   : 4.986504   Max.   : 4.760537  
      V14                 V15                 V16           
 Min.   :-5.105052   Min.   :-5.356945   Min.   :-4.619211  
 1st Qu.:-0.675811   1st Qu.:-0.676363   1st Qu.:-0.675063  
 Median :-0.000476   Median :-0.000209   Median :-0.002079  
 Mean   :-0.000727   Mean   : 0.000236   Mean   :-0.001035  
 3rd Qu.: 0.676599   3rd Qu.: 0.675304   3rd Qu.: 0.672903  
 Max.   : 4.788265   Max.   : 4.843420   Max.   : 4.881039  
      V17                 V18                 V19           
 Min.   :-5.030051   Min.   :-4.530239   Min.   :-4.640407  
 1st Qu.:-0.673383   1st Qu.:-0.673626   1st Qu.:-0.674456  
 Median : 0.001469   Median :-0.002242   Median :-0.001409  
 Mean   : 0.001073   Mean   : 0.000010   Mean   :-0.000900  
 3rd Qu.: 0.675187   3rd Qu.: 0.674442   3rd Qu.: 0.672845  
 Max.   : 4.636643   Max.   : 4.757554   Max.   : 4.539099  
      V20                 V21                 V22           
 Min.   :-4.865603   Min.   :-4.970040   Min.   :-4.988017  
 1st Qu.:-0.674424   1st Qu.:-0.675082   1st Qu.:-0.673167  
 Median :-0.000096   Median : 0.000567   Median : 0.000142  
 Mean   :-0.000687   Mean   : 0.000919   Mean   : 0.000733  
 3rd Qu.: 0.674149   3rd Qu.: 0.676452   3rd Qu.: 0.674971  
 Max.   : 4.952046   Max.   : 4.524130   Max.   : 4.863026  
      V23                 V24                 V25           
 Min.   :-4.812722   Min.   :-5.013179   Min.   :-4.837260  
 1st Qu.:-0.674944   1st Qu.:-0.672214   1st Qu.:-0.675529  
 Median :-0.001995   Median : 0.000951   Median :-0.000741  
 Mean   :-0.001068   Mean   : 0.001300   Mean   :-0.001224  
 3rd Qu.: 0.672623   3rd Qu.: 0.676519   3rd Qu.: 0.674000  
 Max.   : 4.721530   Max.   : 4.679433   Max.   : 4.967416  
      V26                 V27                 V28           
 Min.   :-4.521097   Min.   :-4.543440   Min.   :-4.893254  
 1st Qu.:-0.676986   1st Qu.:-0.673934   1st Qu.:-0.672862  
 Median :-0.000098   Median : 0.001944   Median : 0.000650  
 Mean   :-0.000790   Mean   : 0.000614   Mean   : 0.000764  
 3rd Qu.: 0.673750   3rd Qu.: 0.674596   3rd Qu.: 0.676071  
 Max.   : 4.792611   Max.   : 4.719143   Max.   : 4.745419  
      V29                 V30                 V31           
 Min.   :-4.976386   Min.   :-4.862520   Min.   :-4.577104  
 1st Qu.:-0.674888   1st Qu.:-0.675261   1st Qu.:-0.675057  
 Median :-0.000639   Median :-0.002338   Median :-0.001226  
 Mean   :-0.000189   Mean   :-0.000812   Mean   :-0.000483  
 3rd Qu.: 0.673794   3rd Qu.: 0.674718   3rd Qu.: 0.674688  
 Max.   : 4.640175   Max.   : 4.686452   Max.   : 4.752810  
      V32                 V33                 V34           
 Min.   :-5.127770   Min.   :-5.077334   Min.   :-4.579959  
 1st Qu.:-0.672806   1st Qu.:-0.673575   1st Qu.:-0.674795  
 Median : 0.001505   Median : 0.001191   Median : 0.000880  
 Mean   : 0.001211   Mean   : 0.000516   Mean   : 0.000752  
 3rd Qu.: 0.675547   3rd Qu.: 0.674348   3rd Qu.: 0.676229  
 Max.   : 5.075057   Max.   : 4.852766   Max.   : 5.233123  
      V35                 V36                 V37           
 Min.   :-4.900995   Min.   :-4.832822   Min.   :-4.627498  
 1st Qu.:-0.675796   1st Qu.:-0.673493   1st Qu.:-0.677036  
 Median :-0.001143   Median : 0.002146   Median :-0.000950  
 Mean   :-0.001633   Mean   : 0.000811   Mean   :-0.000728  
 3rd Qu.: 0.672544   3rd Qu.: 0.675353   3rd Qu.: 0.675966  
 Max.   : 4.650680   Max.   : 4.959822   Max.   : 4.890211  
      V38                 V39                 V40           
 Min.   :-4.734693   Min.   :-4.705371   Min.   :-5.536268  
 1st Qu.:-0.674062   1st Qu.:-0.673118   1st Qu.:-0.673627  
 Median : 0.001038   Median : 0.001753   Median : 0.000764  
 Mean   : 0.000902   Mean   : 0.001650   Mean   : 0.001259  
 3rd Qu.: 0.675676   3rd Qu.: 0.676971   3rd Qu.: 0.677178  
 Max.   : 4.610681   Max.   : 4.985710   Max.   : 4.977075  
      V41                 V42                 V43           
 Min.   :-4.796530   Min.   :-4.768484   Min.   :-4.625197  
 1st Qu.:-0.675166   1st Qu.:-0.674473   1st Qu.:-0.676893  
 Median :-0.000081   Median :-0.000029   Median : 0.000064  
 Mean   : 0.000038   Mean   : 0.000230   Mean   :-0.000280  
 3rd Qu.: 0.674726   3rd Qu.: 0.674736   3rd Qu.: 0.673744  
 Max.   : 4.870631   Max.   : 4.514226   Max.   : 4.571729  
      V44                 V45                 V46           
 Min.   :-4.625186   Min.   :-4.449711   Min.   :-4.985139  
 1st Qu.:-0.673461   1st Qu.:-0.674954   1st Qu.:-0.675972  
 Median : 0.000116   Median :-0.002232   Median :-0.000517  
 Mean   : 0.000614   Mean   :-0.000501   Mean   :-0.000651  
 3rd Qu.: 0.674281   3rd Qu.: 0.673768   3rd Qu.: 0.673818  
 Max.   : 4.695246   Max.   : 5.448868   Max.   : 5.030201  
      V47                 V48                 V49           
 Min.   :-4.868966   Min.   :-4.882403   Min.   :-5.020267  
 1st Qu.:-0.674752   1st Qu.:-0.674667   1st Qu.:-0.674735  
 Median : 0.000089   Median : 0.001947   Median : 0.000657  
 Mean   : 0.000506   Mean   : 0.000722   Mean   : 0.001133  
 3rd Qu.: 0.675203   3rd Qu.: 0.675766   3rd Qu.: 0.677766  
 Max.   : 5.800592   Max.   : 4.554565   Max.   : 4.672349  
      V50                 V51                 V52           
 Min.   :-4.766416   Min.   :-4.971858   Min.   :-5.104029  
 1st Qu.:-0.676425   1st Qu.:-0.677097   1st Qu.:-0.674769  
 Median :-0.000095   Median :-0.001730   Median :-0.001840  
 Mean   :-0.001028   Mean   :-0.001782   Mean   :-0.000823  
 3rd Qu.: 0.673600   3rd Qu.: 0.673173   3rd Qu.: 0.673661  
 Max.   : 4.668569   Max.   : 5.100885   Max.   : 4.552456  
      V53                 V54                 V55           
 Min.   :-4.577183   Min.   :-5.178116   Min.   :-4.939930  
 1st Qu.:-0.675446   1st Qu.:-0.674266   1st Qu.:-0.678100  
 Median : 0.000249   Median : 0.001545   Median :-0.003276  
 Mean   : 0.000613   Mean   : 0.001154   Mean   :-0.003193  
 3rd Qu.: 0.675266   3rd Qu.: 0.676066   3rd Qu.: 0.670605  
 Max.   : 4.913329   Max.   : 5.071320   Max.   : 4.735906  
      V56                 V57                 V58           
 Min.   :-5.133533   Min.   :-5.134264   Min.   :-4.790040  
 1st Qu.:-0.673182   1st Qu.:-0.676902   1st Qu.:-0.676669  
 Median :-0.000006   Median :-0.001577   Median :-0.001132  
 Mean   : 0.001182   Mean   :-0.002023   Mean   :-0.001232  
 3rd Qu.: 0.677433   3rd Qu.: 0.672540   3rd Qu.: 0.673222  
 Max.   : 4.861322   Max.   : 4.750161   Max.   : 4.646367  
      V59                 V60                 V61           
 Min.   :-4.925651   Min.   :-4.746249   Min.   :-4.803768  
 1st Qu.:-0.674902   1st Qu.:-0.673520   1st Qu.:-0.674064  
 Median : 0.000179   Median : 0.001949   Median : 0.000151  
 Mean   : 0.000513   Mean   : 0.000853   Mean   :-0.000251  
 3rd Qu.: 0.675776   3rd Qu.: 0.673760   3rd Qu.: 0.673651  
 Max.   : 4.792419   Max.   : 4.626651   Max.   : 5.090257  
      V62                 V63                 V64           
 Min.   :-4.675016   Min.   :-5.612974   Min.   :-4.756755  
 1st Qu.:-0.674248   1st Qu.:-0.674476   1st Qu.:-0.676050  
 Median :-0.001003   Median : 0.000982   Median : 0.000563  
 Mean   : 0.000024   Mean   :-0.000010   Mean   : 0.000093  
 3rd Qu.: 0.675016   3rd Qu.: 0.674445   3rd Qu.: 0.675233  
 Max.   : 5.017194   Max.   : 4.601094   Max.   : 4.837581  
      V65                 V66                 V67           
 Min.   :-4.802963   Min.   :-4.957485   Min.   :-4.982592  
 1st Qu.:-0.676071   1st Qu.:-0.676250   1st Qu.:-0.673894  
 Median :-0.000807   Median : 0.000453   Median :-0.000775  
 Mean   :-0.000519   Mean   :-0.000139   Mean   :-0.000233  
 3rd Qu.: 0.675241   3rd Qu.: 0.674811   3rd Qu.: 0.673265  
 Max.   : 5.471271   Max.   : 4.797355   Max.   : 4.837173  
      V68                 V69                 V70           
 Min.   :-4.704199   Min.   :-4.757344   Min.   :-5.406135  
 1st Qu.:-0.674004   1st Qu.:-0.674410   1st Qu.:-0.671858  
 Median : 0.000163   Median : 0.000806   Median : 0.002570  
 Mean   :-0.000485   Mean   : 0.000814   Mean   : 0.002365  
 3rd Qu.: 0.674284   3rd Qu.: 0.676805   3rd Qu.: 0.676977  
 Max.   : 4.649307   Max.   : 4.662423   Max.   : 4.770026  
      V71                 V72                 V73           
 Min.   :-4.992920   Min.   :-4.867174   Min.   :-4.797343  
 1st Qu.:-0.674030   1st Qu.:-0.676276   1st Qu.:-0.675166  
 Median :-0.000346   Median :-0.001924   Median :-0.002238  
 Mean   :-0.000278   Mean   :-0.000761   Mean   :-0.001712  
 3rd Qu.: 0.673780   3rd Qu.: 0.674297   3rd Qu.: 0.672760  
 Max.   : 4.762700   Max.   : 4.966699   Max.   : 4.875862  
      V74                 V75                 V76           
 Min.   :-5.084939   Min.   :-5.711110   Min.   :-4.786553  
 1st Qu.:-0.676834   1st Qu.:-0.676410   1st Qu.:-0.672727  
 Median :-0.000723   Median :-0.000053   Median : 0.000794  
 Mean   :-0.001326   Mean   :-0.000948   Mean   : 0.000448  
 3rd Qu.: 0.673189   3rd Qu.: 0.673581   3rd Qu.: 0.673085  
 Max.   : 5.288847   Max.   : 4.545478   Max.   : 5.028019  
      V77                 V78                 V79                V80           
 Min.   :-4.829731   Min.   :-4.523914   Min.   :-4.63374   Min.   :-4.530448  
 1st Qu.:-0.672166   1st Qu.:-0.673966   1st Qu.:-0.67339   1st Qu.:-0.673511  
 Median : 0.001332   Median : 0.000963   Median :-0.00133   Median : 0.003233  
 Mean   : 0.000970   Mean   : 0.000408   Mean   :-0.00007   Mean   : 0.002277  
 3rd Qu.: 0.673391   3rd Qu.: 0.673318   3rd Qu.: 0.67319   3rd Qu.: 0.677542  
 Max.   : 4.656470   Max.   : 4.667442   Max.   : 5.14557   Max.   : 4.504096  
      V81                 V82                 V83           
 Min.   :-4.645786   Min.   :-4.590900   Min.   :-5.179611  
 1st Qu.:-0.675145   1st Qu.:-0.675299   1st Qu.:-0.675527  
 Median :-0.001193   Median : 0.000114   Median : 0.001725  
 Mean   :-0.001292   Mean   : 0.000069   Mean   : 0.000442  
 3rd Qu.: 0.672932   3rd Qu.: 0.674450   3rd Qu.: 0.674654  
 Max.   : 4.703301   Max.   : 5.274000   Max.   : 5.621961  
      V84                 V85                 V86           
 Min.   :-5.023343   Min.   :-4.820378   Min.   :-4.618428  
 1st Qu.:-0.674270   1st Qu.:-0.673109   1st Qu.:-0.675796  
 Median : 0.000196   Median : 0.002036   Median :-0.001797  
 Mean   :-0.000330   Mean   : 0.001627   Mean   :-0.000397  
 3rd Qu.: 0.675411   3rd Qu.: 0.676325   3rd Qu.: 0.675198  
 Max.   : 4.765588   Max.   : 4.693340   Max.   : 4.674830  
      V87                 V88                 V89                 V90          
 Min.   :-4.590683   Min.   :-5.283651   Min.   :-4.949791   Min.   :-4.62191  
 1st Qu.:-0.674548   1st Qu.:-0.673073   1st Qu.:-0.674963   1st Qu.:-0.67362  
 Median :-0.001145   Median :-0.000013   Median :-0.000255   Median : 0.00068  
 Mean   : 0.000273   Mean   : 0.000753   Mean   :-0.001445   Mean   : 0.00123  
 3rd Qu.: 0.675323   3rd Qu.: 0.675622   3rd Qu.: 0.673495   3rd Qu.: 0.67728  
 Max.   : 4.801970   Max.   : 4.974775   Max.   : 4.466188   Max.   : 5.32879  
      V91                 V92                 V93           
 Min.   :-4.886936   Min.   :-5.239516   Min.   :-4.672187  
 1st Qu.:-0.672676   1st Qu.:-0.673898   1st Qu.:-0.674098  
 Median :-0.001677   Median : 0.000831   Median :-0.000301  
 Mean   :-0.000393   Mean   : 0.000104   Mean   :-0.000798  
 3rd Qu.: 0.671623   3rd Qu.: 0.674016   3rd Qu.: 0.672917  
 Max.   : 4.731693   Max.   : 4.922819   Max.   : 4.996379  
      V94                 V95                 V96           
 Min.   :-4.748866   Min.   :-4.610138   Min.   :-5.229372  
 1st Qu.:-0.673381   1st Qu.:-0.673380   1st Qu.:-0.674608  
 Median :-0.000493   Median : 0.000519   Median :-0.001016  
 Mean   : 0.000222   Mean   : 0.000245   Mean   :-0.000955  
 3rd Qu.: 0.673766   3rd Qu.: 0.674079   3rd Qu.: 0.673187  
 Max.   : 5.223873   Max.   : 4.783574   Max.   : 5.011628  
      V97                 V98                 V99           
 Min.   :-4.770265   Min.   :-4.485672   Min.   :-5.146650  
 1st Qu.:-0.674162   1st Qu.:-0.674577   1st Qu.:-0.675671  
 Median : 0.000359   Median :-0.000739   Median :-0.000235  
 Mean   : 0.000671   Mean   :-0.000653   Mean   :-0.001382  
 3rd Qu.: 0.675124   3rd Qu.: 0.674521   3rd Qu.: 0.672630  
 Max.   : 4.838386   Max.   : 4.711454   Max.   : 4.462623  
      V100          
 Min.   :-4.955105  
 1st Qu.:-0.671640  
 Median : 0.001866  
 Mean   : 0.001162  
 3rd Qu.: 0.674710  
 Max.   : 4.868854
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgd268ca5},fragile]{Diferentes formas de sumar}
 \texttt{system.time} mide el tiempo de CPU que consume un código\footnote{Para entender la diferencia entre \texttt{user} y \texttt{system} véase explicación \href{http://r.789695.n4.nabble.com/Meaning-of-proc-time-tp2303263p2306691.html}{aquí}.}.

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
system.time({
    suma1 <- numeric(1e6)
    for(i in 1:1e6) suma1[i] <- sum(M[i,])
})
\end{lstlisting}

\begin{verbatim}
 user  system elapsed 
1.425   0.000   1.428
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
system.time(suma2 <- apply(M, 1, sum))
\end{lstlisting}

\begin{verbatim}
 user  system elapsed 
2.598   0.152   2.750
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
system.time(suma3 <- rowSums(M))
\end{lstlisting}

\begin{verbatim}
 user  system elapsed 
0.308   0.000   0.308
\end{verbatim}
\end{frame}


\begin{frame}[label={sec:orge200a18},fragile]{¿Cuánto tarda cada parte de mi función?: \texttt{Rprof}}
 \begin{itemize}
\item Usaremos un fichero temporal
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
tmp <- tempfile()
\end{lstlisting}

\begin{itemize}
\item Activamos la toma de información
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
Rprof(tmp)
\end{lstlisting}

\begin{itemize}
\item Ejecutamos el código a analizar
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
suma1 <- numeric(1e6)
for(i in 1:1e6) suma1[i] <- sum(M[i,])

suma2 <- apply(M, 1, FUN = sum)

suma3 <- rowSums(M)
\end{lstlisting}
\end{frame}

\begin{frame}[label={sec:org4571afc},fragile]{¿Cuánto tarda cada parte de mi función?: \texttt{Rprof}}
 \begin{itemize}
\item Paramos el análisis
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
Rprof()
\end{lstlisting}

\begin{itemize}
\item Extraemos el resumen
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
summaryRprof(tmp)
\end{lstlisting}

\begin{verbatim}
$by.self
                self.time self.pct total.time total.pct
"apply"              1.12    36.60       2.40     78.43
"aperm.default"      0.70    22.88       0.70     22.88
"FUN"                0.52    16.99       0.52     16.99
"sum"                0.34    11.11       0.34     11.11
"rowSums"            0.32    10.46       0.32     10.46
"unlist"             0.04     1.31       0.04      1.31
"lengths"            0.02     0.65       0.02      0.65

$by.total
                total.time total.pct self.time self.pct
"apply"               2.40     78.43      1.12    36.60
"aperm.default"       0.70     22.88      0.70    22.88
"aperm"               0.70     22.88      0.00     0.00
"FUN"                 0.52     16.99      0.52    16.99
"sum"                 0.34     11.11      0.34    11.11
"rowSums"             0.32     10.46      0.32    10.46
"unlist"              0.04      1.31      0.04     1.31
"lengths"             0.02      0.65      0.02     0.65

$sample.interval
[1] 0.02

$sampling.time
[1] 3.06
\end{verbatim}
\end{frame}
\end{document}