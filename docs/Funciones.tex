% Created 2019-05-22 mié 15:28
% Intended LaTeX compiler: pdflatex
\documentclass[xcolor={usenames,svgnames,dvipsnames}]{beamer}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\usepackage{color}
\usepackage{listings}
\usepackage[spanish]{babel}
\setbeamercolor{alerted text}{fg=Blue}
\setbeamerfont{alerted text}{series=\bfseries}
\setbeamercolor{block title}{bg=structure.fg!20!bg!50!bg}
\setbeamercolor{block body}{use=block title,bg=block title.bg}
\AtBeginSubsection[]{\begin{frame}[plain]\tableofcontents[currentsubsection,sectionstyle=show/shaded,subsectionstyle=show/shaded/hide]\end{frame}}
\AtBeginSection[]{\begin{frame}[plain]\tableofcontents[currentsection,hideallsubsections]\end{frame}}
\lstset{keywordstyle=\color{blue}, commentstyle=\color{gray!90}, basicstyle=\ttfamily\small, columns=fullflexible, breaklines=true,linewidth=\textwidth, backgroundcolor=\color{gray!23}, basewidth={0.5em,0.4em}, literate={á}{{\'a}}1 {ñ}{{\~n}}1 {é}{{\'e}}1 {ó}{{\'o}}1 {º}{{\textordmasculine}}1, showstringspaces=false}
\usepackage{mathpazo}
\hypersetup{colorlinks=true, linkcolor=Blue, urlcolor=Blue}
\usepackage{fancyvrb}
\DefineVerbatimEnvironment{verbatim}{Verbatim}{fontsize=\tiny, formatcom = {\color{black!70}}}
\beamertemplatenavigationsymbolsempty
\setbeamertemplate{footline}[frame number]
\AtBeginSection[]{\begin{frame}[plain]\tableofcontents[currentsection,sectionstyle=show/shaded]\end{frame}}
\usetheme{Boadilla}
\usecolortheme{rose}
\usefonttheme{serif}
\author{Oscar Perpiñán Lamigueiro \\ \url{http://oscarperpinan.github.io}}
\date{}
\title{Funciones}
\hypersetup{
 pdfauthor={Oscar Perpiñán Lamigueiro \\ \url{http://oscarperpinan.github.io}},
 pdftitle={Funciones},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 26.1 (Org mode 9.2)}, 
 pdflang={Spanish}}
\begin{document}

\maketitle


\section{Conceptos Básicos}
\label{sec:org6c62061}

\begin{frame}[label={sec:org3b0e01b}]{Fuentes de información}
\begin{itemize}
\item \href{http://cran.r-project.org/doc/manuals/R-intro.html}{R introduction}
\item \href{http://cran.r-project.org/doc/manuals/R-lang.html}{R Language Definition}
\item \href{http://www.springer.com/gb/book/9780387759357}{Software for Data Analysis}
\end{itemize}
\end{frame}
\begin{frame}[label={sec:org1ba7c32},fragile]{Componentes de una función}
 \begin{itemize}
\item Una función se define con \texttt{function}
\end{itemize}
\begin{center}
\texttt{name <- function(arg\_1, arg\_2, ...) expression}
\end{center}
\begin{itemize}
\item Está compuesta por:
\begin{itemize}
\item Nombre de la función (\texttt{name})
\item Argumentos (\texttt{arg\_1}, \texttt{arg\_2}, \texttt{...})
\item Cuerpo (\texttt{expression}): emplea los argumentos para generar un resultado
\end{itemize}
\end{itemize}
\end{frame}
\begin{frame}[label={sec:org516a17e},fragile]{Mi primera función}
 \begin{itemize}
\item Definición
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
myFun <- function(x, y)
{
    x + y
}
\end{lstlisting}

\begin{itemize}
\item Argumentos
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
formals(myFun)
\end{lstlisting}

\begin{verbatim}
$x


$y
\end{verbatim}


\begin{itemize}
\item Cuerpo
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
body(myFun)
\end{lstlisting}

\begin{verbatim}
{
    x + y
}
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgc360a4e},fragile]{Mi primera función}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
myFun(1, 2)
\end{lstlisting}

\begin{verbatim}
[1] 3
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
myFun(1:10, 21:30)
\end{lstlisting}

\begin{verbatim}
[1] 22 24 26 28 30 32 34 36 38 40
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
myFun(1:10, 3)
\end{lstlisting}

\begin{verbatim}
[1]  4  5  6  7  8  9 10 11 12 13
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org92e93f7},fragile]{Argumentos: nombre y orden}
 Una función identifica sus argumentos por su nombre y por su orden (sin nombre)

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power <- function(x, exp)
{
    x^exp
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power(x=1:10, exp=2)
\end{lstlisting}

\begin{verbatim}
[1]   1   4   9  16  25  36  49  64  81 100
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power(1:10, exp=2)
\end{lstlisting}

\begin{verbatim}
[1]   1   4   9  16  25  36  49  64  81 100
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power(exp=2, x=1:10)
\end{lstlisting}

\begin{verbatim}
[1]   1   4   9  16  25  36  49  64  81 100
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org9e54ca2},fragile]{Argumentos: valores por defecto}
 \begin{itemize}
\item Se puede asignar un valor por defecto a los argumentos
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power <- function(x, exp = 2)
{
    x ^ exp
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power(1:10)
\end{lstlisting}

\begin{verbatim}
[1]   1   4   9  16  25  36  49  64  81 100
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
power(1:10, 2)
\end{lstlisting}

\begin{verbatim}
[1]   1   4   9  16  25  36  49  64  81 100
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org26cb71e},fragile]{Funciones sin argumentos}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
hello <- function()
{
    print('Hello world!')
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
hello()
\end{lstlisting}

\begin{verbatim}
[1] "Hello world!"
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgf0be257},fragile]{Argumentos sin nombre: \texttt{...}}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
pwrSum <- function(x, power, ...)
{
    sum(x ^ power, ...)
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
x <- 1:10
pwrSum(x, 2)
\end{lstlisting}

\begin{verbatim}
[1] 385
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
x <- c(1:5, NA, 6:9, NA, 10)
pwrSum(x, 2)
\end{lstlisting}

\begin{verbatim}
[1] NA
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
pwrSum(x, 2, na.rm=TRUE)
\end{lstlisting}

\begin{verbatim}
[1] 385
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org1862f92},fragile]{Argumentos ausentes: \texttt{missing}}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
suma10 <- function(x, y)
{
    if (missing(y)) y <- 10
    x + y
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
suma10(1:10)
\end{lstlisting}

\begin{verbatim}
[1] 11 12 13 14 15 16 17 18 19 20
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orga0f7bfa},fragile]{Control de errores: \texttt{stopifnot}}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo <- function(x, y)
{
    stopifnot(is.numeric(x) & is.numeric(y))
    x + y
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo(1:10, 21:30)
\end{lstlisting}

\begin{verbatim}
[1] 22 24 26 28 30 32 34 36 38 40
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo(1:10, 'a')
\end{lstlisting}

\begin{verbatim}
Error in foo(1:10, "a") : is.numeric(x) & is.numeric(y) is not TRUE
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org860f3c6},fragile]{Control de errores: \texttt{stop}}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo <- function(x, y){
    if (!(is.numeric(x) & is.numeric(y))){
        stop('arguments must be numeric.')
    } else { x + y }
} 
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo(2, 3)
\end{lstlisting}

\begin{verbatim}
[1] 5
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo(2, 'a')
\end{lstlisting}

\begin{verbatim}
Error in foo(2, "a") : arguments must be numeric.
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org18e8e7a},fragile]{Mensajes para el usuario}
 \texttt{stop} para la ejecución y emite un mensaje de error
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
stop('Algo no ha ido bien.')
\end{lstlisting}

\begin{verbatim}
Error: Algo no ha ido bien.
\end{verbatim}


\texttt{warning} no interfiere en la ejecución pero añade un mensaje a la cola de advertencias
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
warning('Quizás algo no es como debiera...')
\end{lstlisting}

\begin{verbatim}
Warning message:
Quizás algo no es como debiera...
\end{verbatim}


\texttt{message} emite un mensaje (\alert{no usar \texttt{cat} o \texttt{print}})
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
message('Todo en orden por estos lares.')
\end{lstlisting}

\begin{verbatim}
Todo en orden por estos lares.
\end{verbatim}
\end{frame}


\section{Lexical scope}
\label{sec:org03bc96c}

\begin{frame}[label={sec:org4c614d0},fragile]{Clases de variables}
 Las variables que se emplean en el cuerpo de una función pueden
dividirse en:
\begin{itemize}
\item Parámetros formales (argumentos): \texttt{x}, \texttt{y}
\item Variables locales (definiciones internas): \texttt{z}, \texttt{w}, \texttt{m}
\item Variables libres: \texttt{a}, \texttt{b}
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
myFun <- function(x, y){
    z <- x^2
    w <- y^3
    m <- a*z + b*w
    m
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
a <- 10
b <- 20
myFun(2, 3)
\end{lstlisting}

\begin{verbatim}
[1] 580
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org28e3461},fragile]{Lexical scope}
 \begin{itemize}
\item Las variables libres deben estar disponibles en el entorno
(\texttt{environment}) en el que la función ha sido creada.
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
environment(myFun) 
\end{lstlisting}

\begin{verbatim}
<environment: R_GlobalEnv>
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
ls()
\end{lstlisting}

\begin{verbatim}
 [1] "a"           "anidada"     "b"           "constructor" "fib"        
 [6] "foo"         "hello"       "i"           "lista"       "ll"         
[11] "M"           "makeNoise"   "myFoo"       "myFun"       "noise"      
[16] "power"       "pwrSum"      "suma"        "suma1"       "suma10"     
[21] "suma2"       "suma3"       "sumNoise"    "sumProd"     "sumSq"      
[26] "tmp"         "vals"        "x"           "xx"          "zz"
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org19af8fd},fragile]{Lexical scope: funciones anidadas}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
anidada <- function(x, y){
    xn <- 2
    yn <- 3
    interna <- function(x, y)
    {
        sum(x^xn, y^yn)
    }
    print(environment(interna))
    interna(x, y)
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
anidada(1:3, 2:4)
\end{lstlisting}

\begin{verbatim}
<environment: 0x55d9bfced1a8>
[1] 113
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sum((1:3)^2, (2:4)^3)
\end{lstlisting}

\begin{verbatim}
[1] 113
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org0dfa012},fragile]{Lexical scope: funciones anidadas}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
xn
\end{lstlisting}

\begin{verbatim}
Error: objeto 'xn' no encontrado
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
yn
\end{lstlisting}

\begin{verbatim}
Error: objeto 'yn' no encontrado
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
interna
\end{lstlisting}

\begin{verbatim}
Error: objeto 'interna' no encontrado
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org17ff12f},fragile]{Funciones que devuelven funciones}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
constructor <- function(m, n){
    function(x)
    {
        m*x + n
    }
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
myFoo <- constructor(10, 3)
myFoo
\end{lstlisting}

\begin{verbatim}
function(x)
    {
        m*x + n
    }
<environment: 0x55d9bfce8fe8>
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
## 10*5 + 3
myFoo(5)
\end{lstlisting}

\begin{verbatim}
[1] 53
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgbcb9eda},fragile]{Funciones que devuelven funciones}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
class(myFoo)
\end{lstlisting}

\begin{verbatim}
[1] "function"
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
environment(myFoo)
\end{lstlisting}

\begin{verbatim}
<environment: 0x55d9bfce8fe8>
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
ls()
\end{lstlisting}

\begin{verbatim}
 [1] "a"           "anidada"     "b"           "constructor" "fib"        
 [6] "foo"         "hello"       "i"           "lista"       "ll"         
[11] "M"           "makeNoise"   "myFoo"       "myFun"       "noise"      
[16] "power"       "pwrSum"      "suma"        "suma1"       "suma10"     
[21] "suma2"       "suma3"       "sumNoise"    "sumProd"     "sumSq"      
[26] "tmp"         "vals"        "x"           "xx"          "zz"
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
ls(env = environment(myFoo))
\end{lstlisting}

\begin{verbatim}
[1] "m" "n"
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
get('m', env = environment(myFoo))
\end{lstlisting}

\begin{verbatim}
[1] 10
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
get('n', env = environment(myFoo))
\end{lstlisting}

\begin{verbatim}
[1] 3
\end{verbatim}
\end{frame}

\section{Funciones para ejecutar funciones}
\label{sec:orgc9aa77e}
\begin{frame}[label={sec:orge4c508e},fragile]{\texttt{lapply}}
 Supongamos que tenemos una lista de objetos, y queremos aplicar a cada elemento la misma función:
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
lista <- list(a = rnorm(100),
              b = runif(100),
              c = rexp(100))
\end{lstlisting}

Podemos resolverlo de forma repetitiva\ldots{}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sum(lista$a)

sum(lista$b)

sum(lista$c)
\end{lstlisting}

\begin{verbatim}
[1] 4.656825
[1] 42.73277
[1] 103.4457
\end{verbatim}


O mejor con \texttt{lapply} (lista + función):
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
lapply(lista, sum)
\end{lstlisting}

\begin{verbatim}
$a
[1] 4.656825

$b
[1] 42.73277

$c
[1] 103.4457
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org5d01004},fragile]{\texttt{do.call}}
 Supongamos que queremos usar los elementos de la lista como argumentos de una función.

Resolvemos de forma directa:
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sum(lista$a, lista$b, lista$c)
\end{lstlisting}

\begin{verbatim}
[1] 150.8353
\end{verbatim}


Mejoramos \emph{un poco} con \texttt{with}:
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
with(lista, sum(a, b, c))
\end{lstlisting}

\begin{verbatim}
[1] 150.8353
\end{verbatim}


La forma recomendable es mediante \texttt{do.call} (función + lista)
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
do.call(sum, lista)
\end{lstlisting}

\begin{verbatim}
[1] 150.8353
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org807a2d0},fragile]{\texttt{do.call}}
 Se emplea frecuentemente para adecuar el resultado de \texttt{lapply} (entrega una lista):
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
  x <- rnorm(5)
  ll <- lapply(1:5, function(i)x^i)
  do.call(rbind, ll)
\end{lstlisting}

\begin{verbatim}
          [,1]       [,2]      [,3]       [,4]      [,5]
[1,] -1.024612 -0.7763783  1.688847 0.53777883 -1.564490
[2,]  1.049829  0.6027632  2.852205 0.28920607  2.447630
[3,] -1.075667 -0.4679723  4.816939 0.15552890 -3.829293
[4,]  1.102141  0.3633235  8.135075 0.08364015  5.990891
[5,] -1.129267 -0.2820765 13.738899 0.04497990 -9.372691
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org369c897},fragile]{\texttt{Reduce}}
 Combina sucesivamente los elementos de un objeto aplicando una función binaria
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
## (((1+2)+3)+4)+5
Reduce('+', 1:5)
\end{lstlisting}

\begin{verbatim}
[1] 15
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgcf24ff0},fragile]{\texttt{Reduce}}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
## (((1/2)/3)/4)/5
Reduce('/', 1:5)
\end{lstlisting}

\begin{verbatim}
[1] 0.008333333
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
foo <- function(u, v)u + 1 /v
Reduce(foo, c(3, 7, 15, 1, 292))
## equivalente a
## foo(foo(foo(foo(3, 7), 15), 1), 292)
\end{lstlisting}

\begin{verbatim}
[1] 4.212948
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
Reduce(foo, c(3, 7, 15, 1, 292), right=TRUE)
## equivalente a
## foo(3, foo(7, foo(15, foo(1, 292))))
\end{lstlisting}

\begin{verbatim}
[1] 3.141593
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:org761b352},fragile]{Funciones recursivas}
 Ejemplo: \href{http://en.wikibooks.org/wiki/R\_Programming/Working\_with\_functions\#Functions\_as\_Objects}{Serie de Fibonnaci}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
fib <- function(n){
    if (n>2) {
        c(fib(n-1),
          sum(tail(fib(n-1),2)))
    } else if (n>=0) rep(1,n)
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
fib(10)
\end{lstlisting}

\begin{verbatim}
[1]  1  1  2  3  5  8 13 21 34 55
\end{verbatim}
\end{frame}

\section{Debug}
\label{sec:orgf3ffc69}

\begin{frame}[label={sec:org58d1523},fragile]{Post-mortem: \texttt{traceback}}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sumSq <- function(x, ...){
    sum(x ^ 2, ...)
}

sumProd <- function(x, y, ...){
    xs <- sumSq(x, ...)
    ys <- sumSq(y, ...)
    xs * ys
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sumProd(rnorm(10), runif(10))
\end{lstlisting}

\begin{verbatim}
[1] 10.05877
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sumProd(rnorm(10), letters[1:10])
\end{lstlisting}

\begin{verbatim}
Error in x^2 : argumento no-numérico para operador binario
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
traceback()
\end{lstlisting}

\begin{verbatim}
2: sumSq(y, ...) at #3
1: sumProd(rnorm(10), letters[1:10])
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgff7f885},fragile]{Analizar antes de que ocurra: \texttt{debug}}
 \begin{itemize}
\item Activa la ejecución paso a paso de una función
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
debug(sumProd)
\end{lstlisting}

\begin{itemize}
\item Cada vez que se llame a la función, su cuerpo se ejecuta línea a línea y los resultados de cada paso pueden ser inspeccionados.
\item Los comandos disponibles son:
\begin{itemize}
\item \texttt{n} o intro: avanzar un paso.
\item \texttt{c}: continua hasta el final del contexto actual (por ejemplo,
terminar un bucle).
\item \texttt{where}: entrega la lista de todas las llamadas activas.
\item \texttt{Q}: termina la inspección y vuelve al nivel superior.
\end{itemize}
\item Para desactivar el análisis:
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
undebug(sumProd)
\end{lstlisting}
\end{frame}

\begin{frame}[label={sec:orgd8c7bc7},fragile]{Analizar antes de que ocurra: \texttt{trace}}
 \begin{itemize}
\item \texttt{trace} permite mayor control que \texttt{debug}
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
trace(sumProd, tracer=browser, exit=browser)
\end{lstlisting}

\begin{verbatim}
[1] "sumProd"
\end{verbatim}


\begin{itemize}
\item La función queda modificada
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
sumProd
\end{lstlisting}

\begin{verbatim}
Object with tracing code, class "functionWithTrace"
Original definition: 
function(x, y, ...){
    xs <- sumSq(x, ...)
    ys <- sumSq(y, ...)
    xs * ys
}
<bytecode: 0x55d9c47ba2a0>

## (to see the tracing code, look at body(object))
\end{verbatim}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
body(sumProd)
\end{lstlisting}

\begin{verbatim}
{
    on.exit(.doTrace(browser(), "on exit"))
    {
        .doTrace(browser(), "on entry")
        {
            xs <- sumSq(x, ...)
            ys <- sumSq(y, ...)
            xs * ys
        }
    }
}
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgd261dc8},fragile]{Analizar antes de que ocurra: \texttt{trace}}
 \begin{itemize}
\item Los comandos \texttt{n} y \texttt{c} cambian respecto a \texttt{debug}:
\begin{itemize}
\item \texttt{c} o intro: avanzar un paso.
\item \texttt{n}: continua hasta el final del contexto actual (por ejemplo,
terminar un bucle).
\end{itemize}
\item Para desactivar
\end{itemize}
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
untrace(sumProd)
\end{lstlisting}
\end{frame}

\begin{frame}[label={sec:org623705e}]{Más recursos}
\begin{itemize}
\item Debugging en RStudio
\begin{itemize}
\item \href{https://support.rstudio.com/hc/en-us/articles/205612627-Debugging-with-RStudio}{Artículo}
\item \href{https://vimeo.com/97831988}{Vídeo}
\end{itemize}
\item \href{http://adv-r.had.co.nz/Exceptions-Debugging.html}{\emph{Debugging} explicado por H. Wickham}
\end{itemize}
\end{frame}

\section{Profiling}
\label{sec:orgd98d342}
\begin{frame}[label={sec:orga833b1a},fragile]{¿Cuánto tarda mi función? \texttt{system.time}}
 Defino una función que rellena una matriz de 10\textsuperscript{6} filas y \texttt{m} columnas con una distribución normal:
\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
makeNoise <- function(n){
    sapply(seq_len(n), function(i) rnorm(1e6))
}
\end{lstlisting}

\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
M <- makeNoise(100)
summary(M)
\end{lstlisting}

\begin{verbatim}
       V1                  V2                  V3           
 Min.   :-4.688361   Min.   :-5.077203   Min.   :-4.747337  
 1st Qu.:-0.674881   1st Qu.:-0.676277   1st Qu.:-0.675707  
 Median :-0.000478   Median :-0.001294   Median :-0.001410  
 Mean   :-0.000623   Mean   :-0.001175   Mean   :-0.001552  
 3rd Qu.: 0.674458   3rd Qu.: 0.673064   3rd Qu.: 0.673440  
 Max.   : 4.815998   Max.   : 4.887105   Max.   : 4.797947  
       V4                  V5                  V6           
 Min.   :-4.490183   Min.   :-5.302761   Min.   :-5.095467  
 1st Qu.:-0.674733   1st Qu.:-0.672828   1st Qu.:-0.676807  
 Median :-0.000739   Median :-0.000008   Median :-0.001260  
 Mean   :-0.000598   Mean   : 0.000366   Mean   :-0.001962  
 3rd Qu.: 0.675618   3rd Qu.: 0.672595   3rd Qu.: 0.673771  
 Max.   : 5.397561   Max.   : 5.037609   Max.   : 5.168260  
       V7                  V8                  V9           
 Min.   :-5.243775   Min.   :-4.736483   Min.   :-5.349814  
 1st Qu.:-0.675340   1st Qu.:-0.674290   1st Qu.:-0.673804  
 Median : 0.000382   Median : 0.001488   Median : 0.001242  
 Mean   : 0.000438   Mean   : 0.000651   Mean   : 0.001003  
 3rd Qu.: 0.674717   3rd Qu.: 0.676127   3rd Qu.: 0.675288  
 Max.   : 4.999696   Max.   : 5.251131   Max.   : 4.961938  
      V10                 V11                 V12           
 Min.   :-4.871596   Min.   :-4.769934   Min.   :-4.696192  
 1st Qu.:-0.674419   1st Qu.:-0.671756   1st Qu.:-0.672722  
 Median :-0.000529   Median : 0.001184   Median :-0.000325  
 Mean   : 0.000176   Mean   : 0.001284   Mean   : 0.001641  
 3rd Qu.: 0.675478   3rd Qu.: 0.674715   3rd Qu.: 0.677753  
 Max.   : 4.739270   Max.   : 5.668571   Max.   : 4.524706  
      V13                 V14                 V15           
 Min.   :-4.799083   Min.   :-5.032002   Min.   :-4.508334  
 1st Qu.:-0.674181   1st Qu.:-0.672471   1st Qu.:-0.676636  
 Median : 0.000290   Median :-0.000469   Median :-0.002993  
 Mean   : 0.000435   Mean   :-0.001001   Mean   :-0.002284  
 3rd Qu.: 0.675923   3rd Qu.: 0.672685   3rd Qu.: 0.672637  
 Max.   : 4.789472   Max.   : 4.858967   Max.   : 4.759057  
      V16                 V17                 V18           
 Min.   :-4.380015   Min.   :-4.944781   Min.   :-4.762675  
 1st Qu.:-0.676025   1st Qu.:-0.674926   1st Qu.:-0.672817  
 Median : 0.000995   Median :-0.001516   Median : 0.001047  
 Mean   : 0.000461   Mean   :-0.000260   Mean   : 0.000999  
 3rd Qu.: 0.674955   3rd Qu.: 0.672754   3rd Qu.: 0.675477  
 Max.   : 4.703931   Max.   : 4.660911   Max.   : 4.672387  
      V19                 V20                 V21           
 Min.   :-4.874461   Min.   :-4.777159   Min.   :-5.286896  
 1st Qu.:-0.674888   1st Qu.:-0.674502   1st Qu.:-0.675272  
 Median : 0.000224   Median : 0.000159   Median :-0.000653  
 Mean   : 0.000920   Mean   :-0.000394   Mean   :-0.001138  
 3rd Qu.: 0.676372   3rd Qu.: 0.672533   3rd Qu.: 0.673509  
 Max.   : 5.096865   Max.   : 4.610882   Max.   : 4.843095  
      V22                 V23                 V24           
 Min.   :-4.802236   Min.   :-5.070639   Min.   :-4.473106  
 1st Qu.:-0.676174   1st Qu.:-0.673468   1st Qu.:-0.675726  
 Median : 0.000515   Median : 0.000765   Median :-0.000579  
 Mean   :-0.000463   Mean   : 0.000253   Mean   : 0.000017  
 3rd Qu.: 0.673973   3rd Qu.: 0.673258   3rd Qu.: 0.675370  
 Max.   : 4.708647   Max.   : 4.923184   Max.   : 5.306941  
      V25                 V26                 V27           
 Min.   :-4.947686   Min.   :-5.166638   Min.   :-4.861816  
 1st Qu.:-0.676185   1st Qu.:-0.677546   1st Qu.:-0.674995  
 Median :-0.000861   Median :-0.002247   Median : 0.001415  
 Mean   :-0.000608   Mean   :-0.002743   Mean   : 0.000403  
 3rd Qu.: 0.673912   3rd Qu.: 0.670090   3rd Qu.: 0.674051  
 Max.   : 4.596084   Max.   : 4.693446   Max.   : 5.223897  
      V28                 V29                 V30                V31           
 Min.   :-4.537566   Min.   :-4.748779   Min.   :-4.58354   Min.   :-4.621765  
 1st Qu.:-0.678251   1st Qu.:-0.672512   1st Qu.:-0.67409   1st Qu.:-0.675423  
 Median :-0.002318   Median : 0.001211   Median :-0.00034   Median :-0.001556  
 Mean   :-0.002274   Mean   : 0.001635   Mean   : 0.00019   Mean   :-0.001370  
 3rd Qu.: 0.672984   3rd Qu.: 0.677007   3rd Qu.: 0.67569   3rd Qu.: 0.672605  
 Max.   : 4.686107   Max.   : 4.890044   Max.   : 5.31255   Max.   : 5.084833  
      V32                 V33                 V34           
 Min.   :-4.776852   Min.   :-4.736582   Min.   :-4.682287  
 1st Qu.:-0.673099   1st Qu.:-0.673345   1st Qu.:-0.678080  
 Median : 0.000771   Median : 0.001592   Median :-0.000820  
 Mean   : 0.000656   Mean   : 0.001613   Mean   :-0.001519  
 3rd Qu.: 0.674159   3rd Qu.: 0.675123   3rd Qu.: 0.672647  
 Max.   : 4.693889   Max.   : 4.677028   Max.   : 5.043645  
      V35                 V36                 V37           
 Min.   :-4.732361   Min.   :-4.485580   Min.   :-4.585619  
 1st Qu.:-0.675262   1st Qu.:-0.673656   1st Qu.:-0.673795  
 Median :-0.001724   Median : 0.001120   Median :-0.000950  
 Mean   :-0.001406   Mean   : 0.000586   Mean   :-0.000562  
 3rd Qu.: 0.673166   3rd Qu.: 0.674425   3rd Qu.: 0.673214  
 Max.   : 5.110372   Max.   : 4.834724   Max.   : 5.199733  
      V38                 V39                 V40           
 Min.   :-4.591970   Min.   :-4.447109   Min.   :-5.133263  
 1st Qu.:-0.673592   1st Qu.:-0.674904   1st Qu.:-0.672240  
 Median : 0.001308   Median :-0.000499   Median : 0.001293  
 Mean   : 0.000551   Mean   :-0.000442   Mean   : 0.000601  
 3rd Qu.: 0.675430   3rd Qu.: 0.673379   3rd Qu.: 0.674670  
 Max.   : 5.120057   Max.   : 4.675371   Max.   : 4.648034  
      V41                 V42                 V43                V44           
 Min.   :-4.579988   Min.   :-4.761810   Min.   :-4.67188   Min.   :-4.930438  
 1st Qu.:-0.674940   1st Qu.:-0.675031   1st Qu.:-0.67526   1st Qu.:-0.674719  
 Median : 0.000646   Median : 0.000077   Median : 0.00003   Median :-0.000544  
 Mean   : 0.000583   Mean   :-0.000193   Mean   :-0.00068   Mean   :-0.000398  
 3rd Qu.: 0.675439   3rd Qu.: 0.673002   3rd Qu.: 0.67468   3rd Qu.: 0.673928  
 Max.   : 5.407685   Max.   : 5.065750   Max.   : 4.94825   Max.   : 4.951483  
      V45                 V46                 V47           
 Min.   :-4.995443   Min.   :-4.922000   Min.   :-4.688891  
 1st Qu.:-0.675724   1st Qu.:-0.675087   1st Qu.:-0.676361  
 Median : 0.000066   Median :-0.000717   Median :-0.004114  
 Mean   :-0.000545   Mean   :-0.001114   Mean   :-0.001943  
 3rd Qu.: 0.674775   3rd Qu.: 0.672765   3rd Qu.: 0.670885  
 Max.   : 4.681467   Max.   : 4.534207   Max.   : 4.734440  
      V48                 V49                 V50           
 Min.   :-4.839178   Min.   :-4.817413   Min.   :-4.819656  
 1st Qu.:-0.673544   1st Qu.:-0.674926   1st Qu.:-0.675120  
 Median : 0.000713   Median : 0.000245   Median : 0.000166  
 Mean   : 0.000587   Mean   :-0.000315   Mean   :-0.000831  
 3rd Qu.: 0.674560   3rd Qu.: 0.674962   3rd Qu.: 0.673977  
 Max.   : 5.182554   Max.   : 4.827293   Max.   : 4.779704  
      V51                 V52                 V53           
 Min.   :-4.740058   Min.   :-5.539859   Min.   :-4.971227  
 1st Qu.:-0.672616   1st Qu.:-0.674782   1st Qu.:-0.675793  
 Median : 0.000127   Median : 0.000500   Median :-0.002335  
 Mean   : 0.001222   Mean   :-0.000985   Mean   :-0.001057  
 3rd Qu.: 0.675379   3rd Qu.: 0.673678   3rd Qu.: 0.673593  
 Max.   : 4.831059   Max.   : 5.151615   Max.   : 5.124661  
      V54                 V55                 V56           
 Min.   :-5.063267   Min.   :-4.845424   Min.   :-4.885718  
 1st Qu.:-0.674215   1st Qu.:-0.673727   1st Qu.:-0.672737  
 Median :-0.001960   Median : 0.000176   Median : 0.001201  
 Mean   :-0.000461   Mean   : 0.000587   Mean   : 0.002108  
 3rd Qu.: 0.673213   3rd Qu.: 0.675446   3rd Qu.: 0.676477  
 Max.   : 4.719151   Max.   : 5.081139   Max.   : 4.791836  
      V57                 V58                 V59           
 Min.   :-5.153741   Min.   :-4.931816   Min.   :-5.049107  
 1st Qu.:-0.677595   1st Qu.:-0.673441   1st Qu.:-0.675549  
 Median :-0.003534   Median : 0.000592   Median : 0.001489  
 Mean   :-0.003050   Mean   : 0.001011   Mean   : 0.001334  
 3rd Qu.: 0.671965   3rd Qu.: 0.675376   3rd Qu.: 0.676933  
 Max.   : 4.609351   Max.   : 4.892849   Max.   : 5.048098  
      V60                 V61                 V62           
 Min.   :-4.987618   Min.   :-4.686651   Min.   :-4.755903  
 1st Qu.:-0.672619   1st Qu.:-0.676850   1st Qu.:-0.672795  
 Median : 0.001674   Median :-0.001981   Median : 0.000298  
 Mean   : 0.000994   Mean   :-0.002024   Mean   :-0.000535  
 3rd Qu.: 0.674822   3rd Qu.: 0.673857   3rd Qu.: 0.673538  
 Max.   : 4.680472   Max.   : 4.990433   Max.   : 4.654502  
      V63                 V64                 V65           
 Min.   :-4.577552   Min.   :-4.960665   Min.   :-4.759987  
 1st Qu.:-0.675665   1st Qu.:-0.673536   1st Qu.:-0.676642  
 Median :-0.000778   Median : 0.001532   Median :-0.002265  
 Mean   :-0.000953   Mean   : 0.000469   Mean   :-0.001603  
 3rd Qu.: 0.673901   3rd Qu.: 0.674562   3rd Qu.: 0.673669  
 Max.   : 4.489853   Max.   : 4.705060   Max.   : 5.005523  
      V66                 V67                 V68           
 Min.   :-5.769164   Min.   :-4.664602   Min.   :-4.593261  
 1st Qu.:-0.672490   1st Qu.:-0.672950   1st Qu.:-0.673009  
 Median : 0.000737   Median : 0.000976   Median : 0.000303  
 Mean   : 0.001444   Mean   : 0.000399   Mean   :-0.000136  
 3rd Qu.: 0.676612   3rd Qu.: 0.674816   3rd Qu.: 0.673824  
 Max.   : 4.712196   Max.   : 4.577240   Max.   : 4.880265  
      V69                 V70                 V71           
 Min.   :-4.922091   Min.   :-4.978381   Min.   :-5.511656  
 1st Qu.:-0.676866   1st Qu.:-0.674991   1st Qu.:-0.673545  
 Median : 0.001062   Median : 0.001121   Median :-0.001193  
 Mean   :-0.000159   Mean   : 0.000338   Mean   :-0.000472  
 3rd Qu.: 0.674641   3rd Qu.: 0.675505   3rd Qu.: 0.672137  
 Max.   : 5.012979   Max.   : 5.260905   Max.   : 5.116420  
      V72                 V73                 V74           
 Min.   :-4.970317   Min.   :-4.880389   Min.   :-4.684429  
 1st Qu.:-0.672993   1st Qu.:-0.675631   1st Qu.:-0.672352  
 Median : 0.000967   Median :-0.001937   Median : 0.001304  
 Mean   : 0.000280   Mean   :-0.001933   Mean   : 0.001126  
 3rd Qu.: 0.674213   3rd Qu.: 0.671613   3rd Qu.: 0.674843  
 Max.   : 4.642863   Max.   : 4.788703   Max.   : 5.044166  
      V75                 V76                 V77           
 Min.   :-4.856002   Min.   :-5.326126   Min.   :-4.526558  
 1st Qu.:-0.674692   1st Qu.:-0.675980   1st Qu.:-0.672831  
 Median :-0.001333   Median :-0.001215   Median : 0.001119  
 Mean   :-0.000403   Mean   :-0.000733   Mean   : 0.000181  
 3rd Qu.: 0.672870   3rd Qu.: 0.674171   3rd Qu.: 0.673943  
 Max.   : 4.652986   Max.   : 4.742496   Max.   : 4.962947  
      V78                 V79                 V80           
 Min.   :-4.869845   Min.   :-4.581781   Min.   :-4.538471  
 1st Qu.:-0.676324   1st Qu.:-0.674534   1st Qu.:-0.674506  
 Median :-0.000380   Median : 0.002343   Median :-0.001567  
 Mean   :-0.000965   Mean   : 0.000923   Mean   :-0.001071  
 3rd Qu.: 0.673156   3rd Qu.: 0.674531   3rd Qu.: 0.672679  
 Max.   : 4.665494   Max.   : 4.932903   Max.   : 4.822257  
      V81                 V82                 V83           
 Min.   :-4.574601   Min.   :-4.723408   Min.   :-4.684194  
 1st Qu.:-0.673514   1st Qu.:-0.675793   1st Qu.:-0.673708  
 Median : 0.001412   Median :-0.001613   Median : 0.001093  
 Mean   : 0.001197   Mean   :-0.002208   Mean   : 0.001942  
 3rd Qu.: 0.675470   3rd Qu.: 0.672103   3rd Qu.: 0.676749  
 Max.   : 5.166873   Max.   : 4.977642   Max.   : 5.110736  
      V84                 V85                 V86           
 Min.   :-4.754737   Min.   :-4.782034   Min.   :-4.718381  
 1st Qu.:-0.674502   1st Qu.:-0.674564   1st Qu.:-0.674706  
 Median :-0.000496   Median :-0.001722   Median : 0.000858  
 Mean   : 0.000313   Mean   :-0.000662   Mean   : 0.000561  
 3rd Qu.: 0.675069   3rd Qu.: 0.674694   3rd Qu.: 0.676065  
 Max.   : 5.222302   Max.   : 4.396441   Max.   : 5.203063  
      V87                 V88                 V89           
 Min.   :-4.900622   Min.   :-4.953120   Min.   :-4.594691  
 1st Qu.:-0.673443   1st Qu.:-0.672857   1st Qu.:-0.674659  
 Median : 0.001161   Median : 0.001157   Median : 0.000381  
 Mean   : 0.000940   Mean   :-0.000287   Mean   : 0.000670  
 3rd Qu.: 0.675355   3rd Qu.: 0.674562   3rd Qu.: 0.674271  
 Max.   : 4.884516   Max.   : 4.974012   Max.   : 4.703889  
      V90                 V91                 V92           
 Min.   :-4.765400   Min.   :-4.919443   Min.   :-5.043708  
 1st Qu.:-0.672490   1st Qu.:-0.676698   1st Qu.:-0.670669  
 Median : 0.000085   Median : 0.000240   Median : 0.002536  
 Mean   : 0.001449   Mean   :-0.000362   Mean   : 0.003260  
 3rd Qu.: 0.675618   3rd Qu.: 0.675478   3rd Qu.: 0.677876  
 Max.   : 4.789060   Max.   : 4.880146   Max.   : 4.953553  
      V93                 V94                 V95           
 Min.   :-4.842224   Min.   :-5.118625   Min.   :-4.944639  
 1st Qu.:-0.672507   1st Qu.:-0.674594   1st Qu.:-0.675651  
 Median : 0.001626   Median :-0.000831   Median :-0.002063  
 Mean   : 0.000758   Mean   :-0.000574   Mean   :-0.001114  
 3rd Qu.: 0.673395   3rd Qu.: 0.673502   3rd Qu.: 0.673536  
 Max.   : 4.949457   Max.   : 5.219471   Max.   : 5.245535  
      V96                 V97                 V98           
 Min.   :-5.154721   Min.   :-4.969313   Min.   :-4.889822  
 1st Qu.:-0.673701   1st Qu.:-0.673895   1st Qu.:-0.672315  
 Median : 0.001202   Median : 0.000679   Median : 0.001949  
 Mean   : 0.000371   Mean   : 0.000834   Mean   : 0.002152  
 3rd Qu.: 0.675026   3rd Qu.: 0.675253   3rd Qu.: 0.674468  
 Max.   : 4.691535   Max.   : 5.024362   Max.   : 4.598741  
      V99                 V100          
 Min.   :-4.667773   Min.   :-5.108425  
 1st Qu.:-0.673752   1st Qu.:-0.676701  
 Median :-0.000066   Median :-0.000466  
 Mean   : 0.000257   Mean   :-0.000249  
 3rd Qu.: 0.674447   3rd Qu.: 0.675481  
 Max.   : 4.721027   Max.   : 5.026601
\end{verbatim}
\end{frame}

\begin{frame}[label={sec:orgc918cce},fragile]{Diferentes formas de sumar}
 \lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
suma1 <- numeric(1e6)
system.time(for(i in 1:1e6) suma1[i] <- sum(M[i,]))
\end{lstlisting}

\begin{verbatim}
 user  system elapsed 
1.676   0.000   1.676
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
system.time(suma2 <- apply(M, 1, sum))
\end{lstlisting}

\begin{verbatim}
 user  system elapsed 
2.210   0.000   2.209
\end{verbatim}


\lstset{language=r,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
system.time(suma3 <- rowSums(M))
\end{lstlisting}

\begin{verbatim}
 user  system elapsed 
0.233   0.000   0.233
\end{verbatim}
\end{frame}
\end{document}